<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Happy New Year 2026</title>
    <style type="text/css">
        :root {
            --vh: 100svh;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Noto Sans TC", "Microsoft JhengHei", sans-serif;
            overflow: hidden;
        }

        /* === åŸºæœ¬èˆå° === */
        .scene {
            position: fixed;
            height: var(--vh);
            inset: 0;
            background: linear-gradient(to bottom,
                    #020510 0%,
                    #0a1428 25%,
                    #15213d 50%,
                    #1a2845 75%,
                    #0b1430 100%);
            overflow: hidden;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s ease;
            z-index: 1;
        }

        .scene.active {
            opacity: 1;
            pointer-events: auto;
            z-index: 2;
        }

        /* === å¤œç©º === */
        .sky {
            position: absolute;
            inset: 0;
        }

        /* === æ˜Ÿæ˜Ÿ === */
        .stars {
            position: absolute;
            inset: 0;
        }

        /* æ˜Ÿæ˜Ÿå±¤æ¬¡1ï¼šå¤§é¡†æ˜äº®çš„æ˜Ÿæ˜Ÿ */
        .stars::before {
            content: "";
            position: absolute;
            inset: 0;
            background:
                radial-gradient(3px 3px at 20% 30%, rgba(255, 255, 255, 1), transparent),
                radial-gradient(2.5px 2.5px at 60% 15%, rgba(200, 220, 255, 0.95), transparent),
                radial-gradient(3px 3px at 85% 25%, rgba(255, 240, 255, 0.9), transparent),
                radial-gradient(2px 2px at 15% 65%, rgba(255, 255, 255, 0.95), transparent),
                radial-gradient(2.5px 2.5px at 75% 45%, rgba(220, 235, 255, 0.9), transparent),
                radial-gradient(3px 3px at 45% 70%, rgba(255, 250, 255, 0.95), transparent),
                radial-gradient(2px 2px at 90% 60%, rgba(200, 220, 255, 0.85), transparent),
                radial-gradient(2.5px 2.5px at 30% 20%, rgba(255, 255, 255, 0.9), transparent),
                radial-gradient(2px 2px at 55% 85%, rgba(220, 230, 255, 0.85), transparent),
                radial-gradient(3px 3px at 10% 40%, rgba(255, 245, 255, 0.95), transparent);
            background-size: 250% 250%;
            animation: stars-twinkle-big 4s ease-in-out infinite, stars-drift 40s linear infinite;
            opacity: 1;
        }

        /* æ˜Ÿæ˜Ÿå±¤æ¬¡2ï¼šä¸­ç­‰æ˜Ÿæ˜Ÿ */
        .stars::after {
            content: "";
            position: absolute;
            inset: 0;
            background:
                radial-gradient(1.5px 1.5px at 25% 35%, rgba(255, 255, 255, 0.8), transparent),
                radial-gradient(1.5px 1.5px at 65% 25%, rgba(200, 220, 255, 0.75), transparent),
                radial-gradient(1.5px 1.5px at 82% 55%, rgba(255, 240, 255, 0.7), transparent),
                radial-gradient(1.5px 1.5px at 18% 75%, rgba(255, 255, 255, 0.75), transparent),
                radial-gradient(1.5px 1.5px at 70% 80%, rgba(220, 235, 255, 0.7), transparent),
                radial-gradient(1.5px 1.5px at 40% 60%, rgba(255, 250, 255, 0.75), transparent),
                radial-gradient(1.5px 1.5px at 95% 35%, rgba(200, 220, 255, 0.7), transparent),
                radial-gradient(1.5px 1.5px at 35% 10%, rgba(255, 255, 255, 0.75), transparent),
                radial-gradient(1.5px 1.5px at 50% 50%, rgba(220, 230, 255, 0.7), transparent),
                radial-gradient(1.5px 1.5px at 8% 20%, rgba(255, 245, 255, 0.75), transparent),
                radial-gradient(1.5px 1.5px at 78% 12%, rgba(255, 255, 255, 0.7), transparent),
                radial-gradient(1.5px 1.5px at 42% 88%, rgba(200, 220, 255, 0.75), transparent),
                radial-gradient(1.5px 1.5px at 88% 75%, rgba(255, 240, 255, 0.7), transparent),
                radial-gradient(1.5px 1.5px at 12% 55%, rgba(255, 255, 255, 0.75), transparent),
                radial-gradient(1.5px 1.5px at 58% 32%, rgba(220, 235, 255, 0.7), transparent);
            background-size: 220% 220%;
            animation: stars-twinkle-medium 5s ease-in-out infinite 1s, stars-drift 35s linear infinite;
            opacity: 0.95;
        }

        /* æ˜Ÿæ˜Ÿå±¤æ¬¡3ï¼šå°é¡†é»ç¶´æ˜Ÿæ˜Ÿ */
        .stars {
            background:
                radial-gradient(1px 1px at 22% 42%, rgba(255, 255, 255, 0.6), transparent),
                radial-gradient(1px 1px at 68% 18%, rgba(200, 220, 255, 0.55), transparent),
                radial-gradient(1px 1px at 80% 48%, rgba(255, 240, 255, 0.5), transparent),
                radial-gradient(1px 1px at 14% 82%, rgba(255, 255, 255, 0.55), transparent),
                radial-gradient(1px 1px at 72% 72%, rgba(220, 235, 255, 0.5), transparent),
                radial-gradient(1px 1px at 38% 65%, rgba(255, 250, 255, 0.55), transparent),
                radial-gradient(1px 1px at 92% 28%, rgba(200, 220, 255, 0.5), transparent),
                radial-gradient(1px 1px at 32% 8%, rgba(255, 255, 255, 0.55), transparent),
                radial-gradient(1px 1px at 52% 55%, rgba(220, 230, 255, 0.5), transparent),
                radial-gradient(1px 1px at 5% 15%, rgba(255, 245, 255, 0.55), transparent),
                radial-gradient(1px 1px at 75% 8%, rgba(255, 255, 255, 0.5), transparent),
                radial-gradient(1px 1px at 48% 92%, rgba(200, 220, 255, 0.55), transparent),
                radial-gradient(1px 1px at 85% 68%, rgba(255, 240, 255, 0.5), transparent),
                radial-gradient(1px 1px at 16% 52%, rgba(255, 255, 255, 0.55), transparent),
                radial-gradient(1px 1px at 62% 38%, rgba(220, 235, 255, 0.5), transparent),
                radial-gradient(1px 1px at 28% 78%, rgba(255, 250, 255, 0.55), transparent),
                radial-gradient(1px 1px at 95% 82%, rgba(200, 220, 255, 0.5), transparent),
                radial-gradient(1px 1px at 8% 68%, rgba(255, 255, 255, 0.55), transparent),
                radial-gradient(1px 1px at 55% 22%, rgba(220, 230, 255, 0.5), transparent),
                radial-gradient(1px 1px at 88% 42%, rgba(255, 245, 255, 0.55), transparent);
            background-size: 200% 200%;
            animation: stars-twinkle-small 6s ease-in-out infinite 2s, stars-drift 30s linear infinite;
            opacity: 0.85;
        }

        @keyframes stars-drift {
            from {
                transform: translateX(0);
            }

            to {
                transform: translateX(-40px);
            }
        }

        @keyframes stars-twinkle-big {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.6;
            }
        }

        @keyframes stars-twinkle-medium {

            0%,
            100% {
                opacity: 0.95;
            }

            50% {
                opacity: 0.5;
            }
        }

        @keyframes stars-twinkle-small {

            0%,
            100% {
                opacity: 0.85;
            }

            50% {
                opacity: 0.3;
            }
        }

        /* === æœˆäº® === */
        .moon {
            position: absolute;
            top: 15%;
            right: 15%;
            width: 120px;
            height: 120px;
            background: radial-gradient(circle at 30% 30%, #fff, #d9d9d9);
            border-radius: 50%;
            box-shadow: 0 0 40px rgba(255, 255, 255, 0.4);
        }

        /* === åœ°é¢ === */
        .ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 30%;
            background: linear-gradient(#02040a, #000);
        }

        /* === å¤œæ™¯åŸå¸‚ç‡ˆå…‰ === */
        .city-lights {
            position: absolute;
            bottom: 5%;
            left: 0;
            width: 100%;
            height: 20%;
            background:
                /* ä¸»è¦åŸå¸‚ç‡ˆå…‰ */
                radial-gradient(3px 8px at 15% 50%, rgba(255, 235, 153, 0.9), transparent),
                radial-gradient(2px 6px at 22% 60%, rgba(255, 230, 128, 0.8), transparent),
                radial-gradient(2px 5px at 28% 45%, rgba(255, 244, 179, 0.7), transparent),
                radial-gradient(3px 7px at 35% 70%, rgba(255, 235, 153, 0.85), transparent),
                radial-gradient(2px 6px at 42% 55%, rgba(255, 230, 128, 0.75), transparent),
                radial-gradient(4px 10px at 50% 65%, rgba(255, 244, 179, 0.9), transparent),
                radial-gradient(2px 5px at 58% 50%, rgba(255, 235, 153, 0.7), transparent),
                radial-gradient(3px 8px at 65% 60%, rgba(255, 230, 128, 0.85), transparent),
                radial-gradient(2px 6px at 72% 55%, rgba(255, 244, 179, 0.8), transparent),
                radial-gradient(3px 9px at 80% 70%, rgba(255, 235, 153, 0.9), transparent),
                radial-gradient(2px 5px at 88% 50%, rgba(255, 230, 128, 0.7), transparent),
                /* æ•£è½çš„å°ç‡ˆå…‰ */
                radial-gradient(1px 3px at 18% 75%, rgba(255, 240, 200, 0.5), transparent),
                radial-gradient(1px 3px at 45% 80%, rgba(255, 245, 210, 0.5), transparent),
                radial-gradient(1px 3px at 68% 75%, rgba(255, 240, 200, 0.5), transparent),
                radial-gradient(1px 3px at 85% 82%, rgba(255, 245, 210, 0.5), transparent),
                /* é è™•çš„å…‰æšˆ */
                radial-gradient(ellipse 20% 10% at 30% 60%, rgba(255, 230, 150, 0.15), transparent),
                radial-gradient(ellipse 25% 12% at 70% 65%, rgba(255, 235, 160, 0.12), transparent);
            opacity: 0;
            transition: opacity 2s ease;
        }

        .scene.show-city .city-lights {
            opacity: 1;
        }

        /* === éœ§æ°£ === */
        .fog {
            position: absolute;
            bottom: 0;
            width: 200%;
            height: 45%;
            background: linear-gradient(to right,
                    rgba(255, 255, 255, 0.03),
                    rgba(255, 255, 255, 0.08),
                    rgba(220, 230, 255, 0.06),
                    rgba(255, 255, 255, 0.04),
                    rgba(240, 245, 255, 0.07),
                    rgba(255, 255, 255, 0.03));
            animation: fog-move 35s linear infinite;
            opacity: 0.6;
        }

        @keyframes fog-move {
            from {
                transform: translateX(0);
            }

            to {
                transform: translateX(-50%);
            }
        }

        /* === é«˜å±±å‰ªå½± === */
        .mountain {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 55%;
        }

        /* ä½¿ç”¨SVG pathå‰µé€ å¹³æ»‘çš„å±±å½¢ */
        .mountain svg {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .mountain .peak {
            fill: #0a0a0a;
            opacity: 0.95;
        }

        .mountain .peak-back {
            fill: #050505;
            opacity: 0.7;
        }

        /* === æ¨¹æœ¨ï¼ˆåˆå§‹é»‘è‰²ï¼‰ === */
        .tree {
            position: absolute;
            right: 15%;
            bottom: 20%;
            width: 300px;
            height: 280px;
            transition: all 3s ease-in-out;
        }

        .tree svg {
            width: 100%;
            height: 100%;
        }

        /* æ¨¹å¹¹å’Œæ¨¹æåˆå§‹ç‚ºé»‘è‰² */
        .tree .trunk,
        .tree .branch {
            fill: none;
            stroke: #000;
            stroke-width: 3;
            transition: stroke 3s ease-in-out;
        }

        .tree .branch {
            stroke-width: 2;
        }

        /* èŠ±æœµåˆå§‹ä¸å¯è¦‹ */
        .tree .blossom {
            opacity: 0;
            transition: opacity 3s ease-in-out;
        }

        /* === æ«»èŠ±æ¨¹è®Šèº« === */
        .scene.transform .tree .trunk,
        .scene.transform .tree .branch {
            stroke: #2a1a1a;
        }

        .scene.transform .tree .blossom {
            opacity: 1;
        }

        /* === å²èŠå§†å‹å¯µç‰© === */
        .pomeranian {
            position: absolute;
            bottom: 20%;
            left: -200px;
            width: 160px;
            fill: #000;
        }

        /* è·³èºç§»å‹•å‹•ç•« */
        .pomeranian.running {
            animation: slime-hop 8s ease-out forwards;
        }

        @keyframes slime-hop {
            0% {
                transform: translateX(-200px) translateY(0) scaleX(1) scaleY(1);
            }

            5% {
                transform: translateX(-150px) translateY(-20px) scaleX(0.95) scaleY(1.1);
            }

            10% {
                transform: translateX(-100px) translateY(0) scaleX(1.1) scaleY(0.9);
            }

            15% {
                transform: translateX(-50px) translateY(-20px) scaleX(0.95) scaleY(1.1);
            }

            20% {
                transform: translateX(0) translateY(0) scaleX(1.1) scaleY(0.9);
            }

            25% {
                transform: translateX(50px) translateY(-20px) scaleX(0.95) scaleY(1.1);
            }

            30% {
                transform: translateX(100px) translateY(0) scaleX(1.1) scaleY(0.9);
            }

            35% {
                transform: translateX(150px) translateY(-20px) scaleX(0.95) scaleY(1.1);
            }

            40% {
                transform: translateX(200px) translateY(0) scaleX(1.1) scaleY(0.9);
            }

            45% {
                transform: translateX(250px) translateY(-18px) scaleX(0.95) scaleY(1.1);
            }

            50% {
                transform: translateX(300px) translateY(0) scaleX(1.1) scaleY(0.9);
            }

            55% {
                transform: translateX(350px) translateY(-18px) scaleX(0.95) scaleY(1.1);
            }

            60% {
                transform: translateX(400px) translateY(0) scaleX(1.1) scaleY(0.9);
            }

            65% {
                transform: translateX(450px) translateY(-15px) scaleX(0.95) scaleY(1.05);
            }

            70% {
                transform: translateX(calc(35vw - 80px)) translateY(0) scaleX(1.05) scaleY(0.95);
            }

            100% {
                transform: translateX(calc(38vw - 80px)) translateY(0) scaleX(1) scaleY(1);
            }
        }

        .tail {
            transform-origin: center;
            animation: tail-wag 0.3s infinite;
        }

        @keyframes tail-wag {

            0%,
            100% {
                transform: rotate(20deg);
            }

            50% {
                transform: rotate(-20deg);
            }
        }

        /* åœä¸‹å¾Œè¼•å¾®å½ˆè·³ */
        .pomeranian.stopped {
            animation: slime-idle 2s ease-in-out infinite;
        }

        @keyframes slime-idle {

            0%,
            100% {
                transform: translateX(calc(38vw - 80px)) scaleX(1) scaleY(1);
            }

            50% {
                transform: translateX(calc(38vw - 80px)) scaleX(1.02) scaleY(0.98);
            }
        }

        .pomeranian.stopped .tail {
            animation: tail-slow 1.5s infinite;
        }

        @keyframes tail-slow {

            0%,
            100% {
                transform: rotate(5deg);
            }

            50% {
                transform: rotate(-5deg);
            }
        }

        /* === æŠ¬é ­çœ‹ === */
        .pomeranian.look-up {
            animation: slime-look-up 2s ease-out forwards;
        }

        @keyframes slime-look-up {
            0% {
                transform: translateX(calc(38vw - 80px)) scaleX(1) scaleY(1);
            }

            100% {
                transform: translateX(calc(38vw - 80px)) scaleX(0.98) scaleY(1.05);
            }
        }

        /* === æ«»èŠ±èŠ±ç“£ === */
        .petals {
            position: absolute;
            inset: 0;
            pointer-events: none;
        }

        .petal {
            position: absolute;
            width: 12px;
            height: 12px;
            opacity: 0;
            animation: petal-fall 10s linear infinite;
        }

        /* æ«»èŠ±èŠ±ç“£å½¢ç‹€ - æ©¢åœ“å‹ */
        .petal::before {
            content: "";
            position: absolute;
            width: 14px;
            height: 8px;
            background: linear-gradient(135deg,
                    rgba(255, 192, 211, 0.95) 0%,
                    rgba(255, 183, 213, 1) 50%,
                    rgba(255, 170, 208, 0.9) 100%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            box-shadow:
                inset 0 -1px 2px rgba(255, 150, 180, 0.3),
                0 1px 3px rgba(255, 183, 213, 0.4);
        }

        /* ç‚ºèŠ±ç“£å¢åŠ ç´°ç¯€ */
        .petal::after {
            content: "";
            position: absolute;
            width: 14px;
            height: 8px;
            background: radial-gradient(ellipse at center,
                    rgba(255, 220, 230, 0.6) 0%,
                    transparent 70%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            top: 0;
            left: 0;
        }

        @keyframes petal-fall {
            0% {
                opacity: 0;
                transform: translateY(-20px) translateX(0) rotate(0deg);
            }

            5% {
                opacity: 1;
            }

            25% {
                transform: translateY(25vh) translateX(20px) rotate(180deg);
            }

            50% {
                transform: translateY(50vh) translateX(-10px) rotate(360deg);
            }

            75% {
                transform: translateY(75vh) translateX(30px) rotate(540deg);
                opacity: 0.8;
            }

            90% {
                opacity: 0.4;
            }

            100% {
                opacity: 0;
                transform: translateY(110vh) translateX(15px) rotate(720deg);
            }
        }

        /* === å€’æ•¸æ•¸å­— === */
        .countdown {
            position: absolute;
            top: 38%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 15vw;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .countdown.visible {
            opacity: 1;
        }

        /* === 2026 ç‰¹æ•ˆ === */
        .year-2026 {
            position: absolute;
            top: 35%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 18vw;
            font-weight: 900;
            color: transparent;
            background: linear-gradient(45deg,
                    #ff6b6b,
                    #ffd93d,
                    #6bcf7f,
                    #4ecdc4,
                    #a78bfa,
                    #ff6bcf);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            background-clip: text;
            opacity: 0;
            text-shadow:
                0 0 20px rgba(255, 107, 107, 0.5),
                0 0 40px rgba(78, 205, 196, 0.4),
                0 0 60px rgba(167, 139, 250, 0.3);
            animation: gradient-flow 3s ease infinite;
            letter-spacing: 0.05em;
        }

        /* === æ–°å¹´å¿«æ¨‚æ–‡å­— === */
        /* === æ–°å¹´å¿«æ¨‚æ–‡å­— === */
        .happy-new-year {
            position: absolute;
            top: 52%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 8vw;
            font-weight: 700;
            color: transparent;
            background: linear-gradient(120deg,
                    #ff6bcf,
                    #ffd93d,
                    #6bcf7f,
                    #4ecdc4,
                    #a78bfa);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            background-clip: text;
            opacity: 0;
            text-shadow:
                0 0 15px rgba(255, 107, 207, 0.6),
                0 0 30px rgba(255, 217, 61, 0.4);
            letter-spacing: 0.08em;
        }

        .happy-new-year.show {
            animation: happy-appear 3s ease forwards, gradient-flow 3s ease infinite;
        }

        @keyframes happy-appear {
            0% {
                opacity: 0;
                transform: translateX(-50%) translateY(30px) scale(0.5);
            }

            70% {
                opacity: 1;
                transform: translateX(-50%) translateY(0) scale(1.1);
            }

            100% {
                opacity: 1;
                transform: translateX(-50%) translateY(0) scale(1);
            }
        }

        .happy-new-year.celebrate {
            animation: happy-bounce 1s ease infinite, gradient-flow 3s ease infinite;
        }

        @keyframes happy-bounce {

            0%,
            100% {
                transform: translateX(-50%) translateY(0) scale(1);
            }

            25% {
                transform: translateX(-50%) translateY(-8px) scale(1.04);
            }

            50% {
                transform: translateX(-50%) translateY(-10px) scale(1.05);
            }

            75% {
                transform: translateX(-50%) translateY(-8px) scale(1.04);
            }
        }

        @keyframes gradient-flow {

            0%,
            100% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }
        }

        .year-2026.show {
            animation: year-appear 5s ease forwards, gradient-flow 3s ease infinite;
        }

        @keyframes year-appear {
            0% {
                opacity: 0;
                transform: translateX(-50%) scale(0.3) rotateY(90deg);
            }

            60% {
                opacity: 1;
                transform: translateX(-50%) scale(1.15) rotateY(0deg);
            }

            100% {
                opacity: 1;
                transform: translateX(-50%) scale(1) rotateY(0deg);
            }
        }

        .year-2026.celebrate {
            animation: year-celebrate 0.8s ease infinite, gradient-flow 2s ease infinite;
        }

        @keyframes year-celebrate {

            0%,
            100% {
                transform: translateX(-50%) scale(1) rotate(0deg);
            }

            25% {
                transform: translateX(-50%) scale(1.05) rotate(-2deg);
            }

            75% {
                transform: translateX(-50%) scale(1.05) rotate(2deg);
            }
        }

        /* 2026 å‘¨åœçš„å…‰æšˆ */
        .year-glow {
            position: absolute;
            top: 35%;
            left: 50%;
            transform: translateX(-50%);
            width: 80vw;
            height: 30vw;
            background: radial-gradient(ellipse,
                    rgba(255, 107, 107, 0.3),
                    rgba(78, 205, 196, 0.2) 30%,
                    transparent 70%);
            opacity: 0;
            filter: blur(40px);
            animation: glow-pulse 2s ease-in-out infinite;
        }

        .year-glow.active {
            opacity: 1;
        }

        @keyframes glow-pulse {

            0%,
            100% {
                transform: translateX(-50%) scale(1);
                opacity: 0.6;
            }

            50% {
                transform: translateX(-50%) scale(1.1);
                opacity: 1;
            }
        }

        /* 2026 ç²’å­ç‰¹æ•ˆ */
        .year-particles {
            position: absolute;
            inset: 0;
            pointer-events: none;
        }

        .year-particle {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            opacity: 0;
        }

        .year-particle.burst {
            animation: particle-burst 5s ease-out forwards;
        }

        @keyframes particle-burst {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }

            100% {
                opacity: 0;
            }
        }

        /* éŸ¿æ‡‰å¼èª¿æ•´ */
        @media (max-width: 768px) {
            .year-2026 {
                font-size: 22vw;
            }

            .happy-new-year {
                font-size: 10vw;
                top: 54%;
            }
        }

        @media (max-width: 480px) {
            .year-2026 {
                font-size: 25vw;
            }

            .happy-new-year {
                font-size: 11vw;
                top: 55%;
            }
        }

        /* === ç…™ç« === */
        .fireworks {
            position: absolute;
            inset: 0;
            pointer-events: none;
        }

        .firework {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        /* ç…™ç«ç²’å­ */
        .firework-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            animation: particle-explode 1.2s ease-out forwards;
        }

        @keyframes particle-explode {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        /* === æ˜Ÿæ˜Ÿé£›ä¾† === */
        .shooting-star {
            position: absolute;
            top: 10%;
            left: 10%;
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, #fff, #ffe3a0);
            border-radius: 50%;
            box-shadow: 0 0 60px rgba(255, 255, 255, 0.8);
            opacity: 0;
        }

        .shooting-star.flying {
            animation: star-fly 2s cubic-bezier(0.25, 0.1, 0.25, 1) forwards;
        }

        @keyframes star-fly {
            0% {
                opacity: 1;
                transform: translate(-100px, -100px) scale(0.3);
            }

            70% {
                transform: translate(calc(50vw - 40px), calc(55vh - 40px)) scale(1.1);
            }

            100% {
                opacity: 1;
                transform: translate(calc(50vw - 40px), calc(55vh - 40px)) scale(1.2);
            }

        }

        /* === æ˜Ÿæ˜Ÿè®Šè›‹ === */
        .shooting-star.transform-to-egg {
            animation: star-to-egg 2s ease forwards;
        }

        @keyframes star-to-egg {
            0% {
                border-radius: 50%;
                background: radial-gradient(circle, #fff, #ffe3a0);
            }

            100% {
                border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
                background: linear-gradient(135deg, #fef9e7, #f9e4b7);
                box-shadow: 0 0 30px rgba(255, 235, 180, 0.6);
            }
        }

        /* === å­µåŒ–æç¤º === */
        .hatch-hint {
            position: absolute;
            top: 70%;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            opacity: 0;
            transition: opacity 1s ease;
        }

        @media (max-width: 480px) {
            .hatch-btn {
                padding: 1rem 2.5rem;
                font-size: 1.1rem;
            }
        }

        .hatch-hint.visible {
            opacity: 1;
        }

        .hatch-hint p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            letter-spacing: 0.1em;
        }

        .hatch-btn {
            padding: 0.8rem 2rem;
            font-size: 1rem;
            font-weight: 500;
            color: #fff;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .hatch-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }

        /* === å­µåŒ–å ´æ™¯ === */
        .hatching-egg {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 180px;
            height: 220px;
            background: linear-gradient(135deg, #fef9e7, #f9e4b7);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            box-shadow: 0 0 40px rgba(255, 235, 180, 0.4);
        }

        /* è£‚ç´‹ === */
        .crack {
            position: absolute;
            background: rgba(0, 0, 0, 0.3);
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .scene.cracking .crack {
            opacity: 1;
        }

        .crack-1 {
            top: 30%;
            left: 50%;
            width: 3px;
            height: 60px;
            transform: translateX(-50%) rotate(15deg);
        }

        .crack-2 {
            top: 40%;
            left: 35%;
            width: 3px;
            height: 50px;
            transform: rotate(-20deg);
        }

        .crack-3 {
            top: 45%;
            right: 35%;
            width: 3px;
            height: 45px;
            transform: rotate(25deg);
        }

        /* å…§éƒ¨ç™¼å…‰ */
        .inner-light {
            position: absolute;
            inset: 20px;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            background: radial-gradient(circle, rgba(255, 255, 200, 0), rgba(255, 255, 200, 0));
            transition: background 1s ease;
        }

        .scene.light .inner-light {
            background: radial-gradient(circle, rgba(255, 255, 200, 0.6), rgba(255, 255, 200, 0));
            animation: pulse-light 1.5s ease infinite;
        }

        @keyframes pulse-light {

            0%,
            100% {
                opacity: 0.6;
            }

            50% {
                opacity: 1;
            }
        }

        .hatch-message {
            position: absolute;
            bottom: 20%;
            width: 100%;
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.1rem;
            letter-spacing: 0.15em;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .scene.cracking .hatch-message {
            opacity: 1;
        }

        /* === å¯µç‰©é¦–é  - å¤¢å¹»æ£®æ—å›å®¶å ´æ™¯ === */
        #scene-pet-home {
            background: transparent;
        }

        /* å¤¢å¹»èƒŒæ™¯åœ–ç‰‡ */
        .dreamy-bg {
            position: fixed;
            inset: 0;
            background:
                radial-gradient(ellipse at bottom, rgba(43, 28, 77, 0.3) 0%, rgba(11, 15, 42, 0.5) 65%),
                url('data:image/png;base64,...') center center / cover no-repeat;
            background-size: cover;
            background-position: center;
            overflow: hidden;
        }

        /* å¦‚æœè¦ä½¿ç”¨å¤–éƒ¨åœ–ç‰‡ï¼Œè«‹ä½¿ç”¨ä»¥ä¸‹æ ¼å¼ï¼š */
        .dreamy-bg-image {
            position: absolute;
            inset: 0;
            background-image: url('background.png');
            background-size: cover;
            background-position: center;
            opacity: 0.95;
        }

        /* ç–ŠåŠ æ¼¸å±¤å¢å¼·æ°›åœ */
        .dreamy-overlay {
            position: absolute;
            inset: 0;
            background:
                radial-gradient(ellipse at top, transparent 0%, rgba(11, 15, 42, 0.3) 100%),
                radial-gradient(circle at 70% 20%, rgba(255, 200, 220, 0.15), transparent 40%),
                radial-gradient(circle at 20% 30%, rgba(180, 200, 255, 0.12), transparent 45%);
        }

        /* é­”æ³•ç²’å­ */
        .magic-particles {
            position: absolute;
            inset: 0;
            background:
                radial-gradient(2px 2px at 15% 25%, rgba(255, 220, 150, 0.8), transparent),
                radial-gradient(1.5px 1.5px at 85% 15%, rgba(255, 200, 220, 0.7), transparent),
                radial-gradient(2px 2px at 45% 35%, rgba(200, 220, 255, 0.6), transparent),
                radial-gradient(1.5px 1.5px at 70% 45%, rgba(255, 230, 180, 0.75), transparent),
                radial-gradient(2px 2px at 25% 55%, rgba(255, 210, 200, 0.7), transparent),
                radial-gradient(1.5px 1.5px at 90% 65%, rgba(220, 200, 255, 0.65), transparent),
                radial-gradient(2px 2px at 10% 75%, rgba(255, 220, 150, 0.8), transparent),
                radial-gradient(1.5px 1.5px at 55% 85%, rgba(200, 230, 255, 0.7), transparent);
            background-size: 200% 200%;
            animation: magic-float 20s ease-in-out infinite;
            opacity: 0.6;
        }

        @keyframes magic-float {

            0%,
            100% {
                transform: translateY(0) translateX(0);
                opacity: 0.6;
            }

            50% {
                transform: translateY(-20px) translateX(10px);
                opacity: 0.4;
            }
        }

        /* æ£®æ—å‰ªå½±å±¤ - é™ä½ä¸é€æ˜åº¦ä»¥é¡¯ç¤ºèƒŒæ™¯ */
        .forest-silhouette {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60%;
            background: linear-gradient(to top, rgba(10, 8, 32, 0.3), transparent);
        }

        .forest-trees {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 50%;
        }

        .forest-trees svg {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 100%;
        }

        /* æ«»èŠ±æ¨¹å‰ªå½± - ç§»é™¤ä»¥é¡¯ç¤ºèƒŒæ™¯ä¸­çš„æ¨¹ */
        .cherry-tree-left,
        .cherry-tree-right {
            display: none;
        }

        /* æº«æš–çš„ç‡ˆå…‰ */
        .warm-lights {
            position: absolute;
            inset: 0;
            background:
                radial-gradient(ellipse 3px 8px at 18% 55%, rgba(255, 230, 150, 0.6), transparent),
                radial-gradient(ellipse 2.5px 7px at 25% 60%, rgba(255, 220, 140, 0.55), transparent),
                radial-gradient(ellipse 3px 8px at 32% 57%, rgba(255, 235, 155, 0.6), transparent),
                radial-gradient(ellipse 2.5px 7px at 68% 57%, rgba(255, 230, 150, 0.55), transparent),
                radial-gradient(ellipse 3px 8px at 75% 60%, rgba(255, 220, 140, 0.6), transparent),
                radial-gradient(ellipse 2.5px 7px at 82% 55%, rgba(255, 235, 155, 0.55), transparent);
            animation: light-glow 3s ease-in-out infinite;
        }

        @keyframes light-glow {

            0%,
            100% {
                opacity: 0.7;
            }

            50% {
                opacity: 1;
            }
        }

        /* æ…¶ç¥ç…™ç« */
        .celebration-fireworks {
            position: absolute;
            inset: 0;
            pointer-events: none;
        }

        .mini-firework {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            animation: mini-burst 3s ease-out infinite;
        }

        @keyframes mini-burst {
            0% {
                transform: scale(0);
                opacity: 1;
            }

            50% {
                opacity: 0.8;
            }

            100% {
                transform: scale(1);
                opacity: 0;
            }
        }

        /* å°è·¯ */
        .path-home {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 40%;
            height: 30%;
            background: linear-gradient(to top,
                    rgba(255, 240, 200, 0.15) 0%,
                    rgba(255, 230, 180, 0.1) 30%,
                    transparent 100%);
            clip-path: polygon(45% 100%, 35% 0%, 65% 0%, 55% 100%);
        }

        .pet-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 10;
        }

        .pet {
            width: 200px;
            height: 160px;
            fill: #fff;
            filter: drop-shadow(0 0 25px rgba(255, 230, 200, 0.8));
            cursor: pointer;
            transition: transform 0.3s ease;
            animation: pet-appear 2.5s ease forwards;
        }

        @keyframes pet-appear {
            0% {
                transform: scale(0.3);
                filter: drop-shadow(0 0 40px rgba(255, 230, 200, 1));
            }

            100% {
                transform: scale(1);
                filter: drop-shadow(0 0 25px rgba(255, 230, 200, 0.8));
            }
        }

        .pet:hover {
            transform: scale(1.05);
            filter: drop-shadow(0 0 30px rgba(255, 230, 200, 0.9));
        }

        .pet.touched {
            animation: pet-bounce 0.5s ease;
        }

        @keyframes pet-bounce {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }
        }

        .pet-name {
            color: #fff;
            font-size: 2rem;
            margin-top: 2rem;
            opacity: 0;
            animation: text-fade-in 2s ease 1.5s forwards;
            text-shadow: 0 2px 10px rgba(100, 50, 150, 0.6), 0 0 20px rgba(255, 200, 220, 0.4);
        }

        .pet-message {
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.2rem;
            margin-top: 1rem;
            line-height: 1.8;
            opacity: 0;
            animation: text-fade-in 2s ease 2s forwards;
            text-shadow: 0 2px 8px rgba(50, 30, 80, 0.8), 0 0 15px rgba(255, 200, 220, 0.3);
        }

        @keyframes text-fade-in {
            to {
                opacity: 1;
            }
        }

        /* === è¨˜æ†¶è¡¨å–® === */
        .memory-form {
            position: fixed;
            bottom: 8%;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            gap: 1rem;
            opacity: 0;
            animation: text-fade-in 1.5s ease 2s forwards;
            width: 90%;
            max-width: 320px;
            z-index: 100;
        }

        .memory-form input {
            padding: 0.8rem 1.2rem;
            font-size: 1rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .memory-form input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .memory-form input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.15);
        }

        .memory-form button {
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            font-weight: 500;
            color: #fff;
            background: rgba(100, 150, 255, 0.3);
            border: 2px solid rgba(100, 150, 255, 0.5);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .memory-form button:hover {
            background: rgba(100, 150, 255, 0.5);
            transform: translateY(-2px);
        }

        /* === é¤µé£Ÿç³»çµ± === */
        .feeding-system {
            position: fixed;
            bottom: 8%;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            opacity: 0;
            z-index: 10;
            transition: opacity 0.5s ease;
        }

        .feeding-system.visible {
            opacity: 1;
        }

        /* é£½é£Ÿåº¦é¡¯ç¤º */
        /* é£½é£Ÿåº¦é¡¯ç¤º */
        /* é£½é£Ÿåº¦é¡¯ç¤º */
        .hunger-display {
            position: fixed;
            top: 15px;
            right: 15px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            z-index: 50;
        }

        .hunger-label {
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.85rem;
            font-weight: 500;
        }

        .hunger-icons {
            display: flex;
            gap: 0.25rem;
        }

        .hunger-heart {
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .hunger-heart.full {
            color: #ff6bcf;
            filter: drop-shadow(0 0 5px rgba(255, 107, 207, 0.6));
        }

        .hunger-heart.empty {
            color: rgba(255, 255, 255, 0.3);
        }

        /* é¤µé£ŸæŒ‰éˆ• */
        .feed-button {
            padding: 0.8rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            color: #fff;
            background: linear-gradient(135deg, rgba(255, 107, 207, 0.4), rgba(167, 139, 250, 0.4));
            border: 2px solid rgba(255, 107, 207, 0.5);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .feed-button:hover {
            background: linear-gradient(135deg, rgba(255, 107, 207, 0.6), rgba(167, 139, 250, 0.6));
            border-color: rgba(255, 107, 207, 0.7);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 107, 207, 0.4);
        }

        .feed-button:active {
            transform: translateY(-1px);
        }

        .feed-button.feeding {
            animation: feed-pulse 0.5s ease;
        }

        @keyframes feed-pulse {

            0%,
            100% {
                transform: translateY(0) scale(1);
            }

            50% {
                transform: translateY(-5px) scale(1.05);
            }
        }

        /* === æ„›å¿ƒç‰¹æ•ˆ === */
        .hearts-container {
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: 5;
        }

        .floating-heart {
            position: absolute;
            font-size: 2rem;
            color: #ff6bcf;
            opacity: 0;
            pointer-events: none;
            filter: drop-shadow(0 0 8px rgba(255, 107, 207, 0.6));
            animation: heart-float 2s ease-out forwards;
        }

        @keyframes heart-float {
            0% {
                opacity: 1;
                transform: translateY(0) scale(0.5) rotate(0deg);
            }

            50% {
                opacity: 1;
                transform: translateY(-80px) scale(1.2) rotate(15deg);
            }

            100% {
                opacity: 0;
                transform: translateY(-150px) scale(0.8) rotate(30deg);
            }
        }

        /* å¯µç‰©åƒæ±è¥¿å‹•ç•« */
        .pet.eating {
            animation: pet-eating 0.6s ease;
        }

        @keyframes pet-eating {

            0%,
            100% {
                transform: scale(1);
            }

            25% {
                transform: scale(1.05) rotate(-3deg);
            }

            75% {
                transform: scale(1.05) rotate(3deg);
            }
        }

        /* é£½é£Ÿæç¤º */
        .feed-message {
            position: absolute;
            top: 25%;
            left: 50%;
            transform: translateX(-50%);
            padding: 0.8rem 1.5rem;
            background: rgba(255, 107, 207, 0.2);
            border: 2px solid rgba(255, 107, 207, 0.5);
            border-radius: 20px;
            color: #fff;
            font-size: 1rem;
            font-weight: 500;
            backdrop-filter: blur(10px);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            z-index: 15;
        }

        .feed-message.show {
            opacity: 1;
            animation: message-bounce 0.5s ease;
        }

        @keyframes message-bounce {

            0%,
            100% {
                transform: translateX(-50%) translateY(0);
            }

            50% {
                transform: translateX(-50%) translateY(-10px);
            }
        }

        /* === éŸ¿æ‡‰å¼ === */
        @media (max-width: 768px) {
            .countdown {
                font-size: 20vw;
            }

            .pet {
                width: 160px;
                height: 128px;
            }

            .pet-name {
                font-size: 1.5rem;
            }

            .pet-message {
                font-size: 1rem;
                padding: 0 1rem;
            }
        }

        @media (max-width: 480px) {
            .pomeranian {
                bottom: 22%;
            }

            .pomeranian.running,
            .pomeranian.stopped,
            .pomeranian.look-up {
                transform: translateX(calc(50vw - 80px)) !important;
            }
        }

        @media (max-width: 480px) {
            .pet-container {
                top: 45%;
            }
        }

        @media (max-width: 480px) {
            .pet-name {
                font-size: 1.4rem;
                margin-top: 1.5rem;
            }

            .pet-message {
                font-size: 1rem;
                line-height: 1.6;
            }
        }

        @media (max-width: 480px) {
            .memory-form {
                bottom: 5%;
            }
        }

        /* === ç”Ÿæ—¥ç‰¹æ®ŠæŒ‰éˆ• === */
        .birthday-special-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 0.6rem 1.2rem;
            font-size: 0.9rem;
            font-weight: 600;
            color: #fff;
            background: linear-gradient(135deg, #ff6bcf, #ffd93d, #6bcf7f, #4ecdc4);
            background-size: 300% 300%;
            border: 2px solid rgba(255, 255, 255, 0.8);
            border-radius: 25px;
            cursor: pointer;
            z-index: 100;
            display: none;
            box-shadow:
                0 0 20px rgba(255, 107, 207, 0.6),
                0 0 40px rgba(255, 217, 61, 0.4),
                0 5px 15px rgba(0, 0, 0, 0.3);
            animation: birthday-button-glow 3s ease infinite, birthday-button-bounce 2s ease infinite;
            transition: transform 0.3s ease;
            white-space: nowrap;
        }

        .birthday-special-button.show {
            display: flex;
        }

        .birthday-special-button:hover {
            transform: scale(1.1);
        }

        .birthday-special-button:active {
            transform: scale(0.95);
        }

        @keyframes birthday-button-glow {

            0%,
            100% {
                background-position: 0% 50%;
                box-shadow:
                    0 0 20px rgba(255, 107, 207, 0.6),
                    0 0 40px rgba(255, 217, 61, 0.4),
                    0 5px 15px rgba(0, 0, 0, 0.3);
            }

            50% {
                background-position: 100% 50%;
                box-shadow:
                    0 0 30px rgba(255, 107, 207, 0.8),
                    0 0 60px rgba(255, 217, 61, 0.6),
                    0 5px 20px rgba(0, 0, 0, 0.4);
            }
        }

        @keyframes birthday-button-bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        @media (max-width: 768px) {
            .birthday-special-button {
                bottom: 15px;
                right: 15px;
                padding: 0.5rem 1rem;
                font-size: 0.85rem;
            }

            .hunger-display {
                top: 10px;
                right: 10px;
                padding: 0.4rem 0.8rem;
                gap: 0.4rem;
            }

            .hunger-label {
                font-size: 0.75rem;
            }

            .hunger-heart {
                font-size: 0.9rem;
            }
        }

        /* ğŸ“± æ‰‹æ©Ÿç‰ˆé¡å¤–èª¿æ•´ */
        @media (max-width: 480px) {
            .birthday-special-button {
                bottom: 15px;
                /* ğŸ‘ˆ æ”¹å›å³ä¸‹è§’ */
                right: 15px;
                padding: 0.45rem 0.9rem;
                font-size: 0.8rem;
            }
        }

        /* === ç”Ÿæ—¥è›‹ç³•å ´æ™¯ === */
        .birthday-cake-scene {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 2rem;
        }

        .cake-container {
            position: relative;
            width: 280px;
            height: 320px;
            animation: cake-appear 1.5s ease-out;
        }

        @keyframes cake-appear {
            0% {
                transform: scale(0);
                opacity: 0;
            }

            70% {
                transform: scale(1.1);
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .cake-layer {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 8px;
        }

        .layer-bottom {
            bottom: 0;
            width: 240px;
            height: 90px;
            background: linear-gradient(to bottom, #ffb3d9 0%, #ff99cc 100%);
            border: 4px solid #fff;
        }

        .layer-middle {
            bottom: 85px;
            width: 200px;
            height: 80px;
            background: linear-gradient(to bottom, #b3ffcc 0%, #99ffb3 100%);
            border: 4px solid #fff;
        }

        .layer-top {
            bottom: 160px;
            width: 160px;
            height: 70px;
            background: linear-gradient(to bottom, #fffacd 0%, #ffe680 100%);
            border: 4px solid #fff;
        }

        .frosting {
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 12px;
            background: repeating-linear-gradient(90deg,
                    #fff 0px,
                    #fff 15px,
                    transparent 15px,
                    transparent 30px);
            border-radius: 0 0 8px 8px;
        }

        .candle {
            position: absolute;
            bottom: 230px;
            left: 50%;
            transform: translateX(-50%);
            width: 12px;
            height: 50px;
            background: linear-gradient(to bottom, #ff99dd, #cc66ff);
            border-radius: 2px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .candle::before {
            content: '';
            position: absolute;
            top: -3px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 8px;
            background: #333;
            border-radius: 1px;
        }

        .flame {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 16px;
            height: 24px;
            background: radial-gradient(ellipse at center, #ffeb3b 0%, #ff9800 40%, #ff5722 70%, transparent 100%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: flame-flicker 0.5s ease-in-out infinite alternate;
            box-shadow: 0 0 20px rgba(255, 150, 0, 0.8);
        }

        @keyframes flame-flicker {
            0% {
                transform: translateX(-50%) scaleY(1) scaleX(1);
                opacity: 1;
            }

            100% {
                transform: translateX(-50%) scaleY(1.1) scaleX(0.95);
                opacity: 0.9;
            }
        }

        .flame.blown-out {
            animation: flame-blow-out 0.8s ease-out forwards;
        }

        @keyframes flame-blow-out {
            0% {
                transform: translateX(-50%) scaleY(1);
                opacity: 1;
            }

            50% {
                transform: translateX(-30%) scaleY(0.5) scaleX(1.5);
                opacity: 0.5;
            }

            100% {
                transform: translateX(-20%) scaleY(0);
                opacity: 0;
            }
        }

        .smoke {
            position: absolute;
            top: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            background: rgba(150, 150, 150, 0.6);
            border-radius: 50%;
            opacity: 0;
        }

        .smoke.rising {
            animation: smoke-rise 2s ease-out forwards;
        }

        @keyframes smoke-rise {
            0% {
                transform: translateX(-50%) translateY(0) scale(1);
                opacity: 0.6;
            }

            100% {
                transform: translateX(-50%) translateY(-60px) scale(3);
                opacity: 0;
            }
        }

        .birthday-message {
            text-align: center;
            color: #fff;
            text-shadow: 0 2px 10px rgba(100, 50, 150, 0.6);
        }

        .birthday-message h2 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(45deg, #ff6bcf, #ffd93d, #6bcf7f);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .birthday-message p {
            font-size: 1.3rem;
            opacity: 0.95;
        }

        .blow-candle-btn {
            padding: 1rem 2.5rem;
            font-size: 1.2rem;
            font-weight: 600;
            color: #fff;
            background: linear-gradient(135deg, rgba(255, 107, 207, 0.4), rgba(167, 139, 250, 0.4));
            border: 2px solid rgba(255, 107, 207, 0.6);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .blow-candle-btn:hover {
            background: linear-gradient(135deg, rgba(255, 107, 207, 0.6), rgba(167, 139, 250, 0.6));
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(255, 107, 207, 0.5);
        }

        .close-birthday-btn {
            padding: 0.8rem 2rem;
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.8);
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-birthday-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }

        .confetti-container {
            position: absolute;
            inset: 0;
            pointer-events: none;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            opacity: 0;
        }

        .confetti.falling {
            animation: confetti-fall 3s ease-out forwards;
        }

        @keyframes confetti-fall {
            0% {
                opacity: 1;
                transform: translateY(-20px) rotate(0deg);
            }

            100% {
                opacity: 0;
                transform: translateY(110vh) rotate(720deg);
            }
        }

        @media (max-width: 768px) {
            .cake-container {
                width: 220px;
                height: 260px;
            }

            .layer-bottom {
                width: 200px;
                height: 75px;
            }

            .layer-middle {
                width: 160px;
                height: 65px;
                bottom: 70px;
            }

            .layer-top {
                width: 130px;
                height: 55px;
                bottom: 130px;
            }

            .candle {
                bottom: 185px;
            }

            .birthday-message h2 {
                font-size: 2rem;
            }

            .birthday-message p {
                font-size: 1.1rem;
            }
        }

        /* æŸ¥çœ‹è¨Šæ¯æŒ‰éˆ• - å·¦ä¸Šè§’ */
        .top-left-msg-btn {
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 100;
        }

        .action-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.4);
            padding: 0.6rem 1.2rem;
            border-radius: 20px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.35);
            border-color: rgba(255, 255, 255, 0.6);
            transform: translateY(-2px);
        }

        .action-btn:active {
            transform: translateY(0);
        }

        @media (max-width: 768px) {
            /* ... å…¶ä»–éŸ¿æ‡‰å¼è¦å‰‡ ... */

            .top-left-msg-btn {
                top: 10px;
                left: 10px;
            }

            .action-btn {
                padding: 0.5rem 1rem;
                font-size: 0.85rem;
            }
        }

        /* å½ˆçª—æ¨£å¼ */
        .pet-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            /* åˆå§‹éš±è— */
            justify-content: center;
            align-items: center;
            z-index: 2000;
            /* ç¢ºä¿åœ¨æœ€ä¸Šå±¤ */
            backdrop-filter: blur(8px);
        }

        .pet-modal-overlay.show {
            display: flex;
        }

        .pet-modal-content {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(240, 240, 255, 0.95));
            padding: 30px;
            border-radius: 25px;
            width: 85%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            animation: modal-appear 0.3s ease-out;
        }

        @keyframes modal-appear {
            0% {
                opacity: 0;
                transform: scale(0.8) translateY(-20px);
            }

            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .pet-modal-content h3 {
            color: #ff6bcf;
            font-size: 1.8rem;
            margin-bottom: 1rem;
        }

        .pet-modal-content p {
            color: #333;
            font-size: 1rem;
            line-height: 1.8;
            text-align: left;
            margin-bottom: 1.5rem;
        }

        .close-modal-btn {
            margin-top: 15px;
            background: linear-gradient(135deg, #ff6bcf, #a78bfa);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .close-modal-btn:hover {
            background: linear-gradient(135deg, #ff8bd4, #b89fff);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 207, 0.4);
        }

        .close-modal-btn:active {
            transform: translateY(0);
        }

        /* éŸ¿æ‡‰å¼ */
        @media (max-width: 768px) {
            .pet-modal-content {
                width: 90%;
                padding: 25px;
                max-height: 70vh;
            }

            .pet-modal-content h3 {
                font-size: 1.5rem;
            }

            .pet-modal-content p {
                font-size: 0.95rem;
            }
        }

        /* è·³éå‹•ç•«æŒ‰éˆ• */
        .skip-animation-btn {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 0.6rem 1.5rem;
            font-size: 0.9rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.9);
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(100, 255, 100, 0.4);
            border-radius: 25px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            z-index: 150;
            transition: all 0.3s ease;
            display: none;
            /* åˆå§‹éš±è— */
        }

        .skip-animation-btn.show {
            display: block;
        }

        .skip-animation-btn:hover {
            background: rgba(0, 0, 0, 0.5);
            border-color: rgba(100, 255, 100, 0.6);
            color: rgba(100, 255, 100, 1);
            transform: translateX(-50%) translateY(-3px);
            box-shadow: 0 5px 15px rgba(100, 255, 100, 0.3);
        }

        .skip-animation-btn:active {
            transform: translateX(-50%) translateY(-1px);
        }

        @media (max-width: 768px) {
            .skip-animation-btn {
                bottom: 15px;
                padding: 0.5rem 1.2rem;
                font-size: 0.85rem;
            }
        }
    </style>
</head>

<body>
    <!-- è·³éå‹•ç•«æŒ‰éˆ• -->
    <button class="skip-animation-btn" id="skipAnimationBtn">â­ è·³éå‹•ç•«</button>
    <main>
        <!-- CH1: å¥”è·‘å ´æ™¯ -->
        <section id="scene-running" class="scene active">
            <div class="sky">
                <div class="stars"></div>
            </div>
            <div class="moon"></div>
            <div class="fog"></div>
            <div class="mountain">
                <svg viewBox="0 0 100 100" preserveAspectRatio="none">
                    <!-- å¾Œæ–¹çš„å±±ï¼ˆå·¦å´ï¼Œè¼ƒçŸ®è¼ƒåœ“ï¼‰ -->
                    <path class="peak-back"
                        d="M 0 100 L 0 50 Q 10 35, 20 38 Q 30 30, 40 42 Q 50 38, 60 55 L 60 100 Z" />
                    <!-- å‰æ–¹çš„ä¸»å±±ï¼ˆå³å´ï¼Œè¼ƒé«˜ï¼‰ -->
                    <path class="peak" d="M 30 100 L 30 65 Q 45 25, 60 22 Q 68 18, 75 22 Q 90 28, 100 70 L 100 100 Z" />
                </svg>
            </div>
            <div class="ground"></div>
            <div class="tree">
                <svg viewBox="0 0 300 280" xmlns="http://www.w3.org/2000/svg">
                    <!-- ä¸»æ¨¹å¹¹ -->
                    <path class="trunk" d="M 150 280 Q 145 200 150 150 Q 155 200 150 280" stroke-width="8" />

                    <!-- å·¦å´ä¸»æ -->
                    <path class="branch" d="M 150 180 Q 100 170 60 160" />
                    <path class="branch" d="M 150 160 Q 110 150 80 145" />
                    <path class="branch" d="M 150 140 Q 100 130 70 125" />

                    <!-- å³å´ä¸»æ -->
                    <path class="branch" d="M 150 180 Q 200 170 240 160" />
                    <path class="branch" d="M 150 160 Q 190 150 220 145" />
                    <path class="branch" d="M 150 140 Q 200 130 230 125" />

                    <!-- ä¸Šæ–¹ææ¢ -->
                    <path class="branch" d="M 150 120 Q 120 100 100 85" />
                    <path class="branch" d="M 150 120 Q 180 100 200 85" />
                    <path class="branch" d="M 150 100 Q 130 80 115 65" />
                    <path class="branch" d="M 150 100 Q 170 80 185 65" />

                    <!-- ç´°å°ææ¢ï¼ˆå·¦ï¼‰ -->
                    <path class="branch" d="M 80 145 Q 70 140 65 135" stroke-width="1" />
                    <path class="branch" d="M 80 145 Q 75 150 70 155" stroke-width="1" />
                    <path class="branch" d="M 70 125 Q 60 120 55 115" stroke-width="1" />
                    <path class="branch" d="M 100 85 Q 90 75 85 70" stroke-width="1" />

                    <!-- ç´°å°ææ¢ï¼ˆå³ï¼‰ -->
                    <path class="branch" d="M 220 145 Q 230 140 235 135" stroke-width="1" />
                    <path class="branch" d="M 220 145 Q 225 150 230 155" stroke-width="1" />
                    <path class="branch" d="M 230 125 Q 240 120 245 115" stroke-width="1" />
                    <path class="branch" d="M 200 85 Q 210 75 215 70" stroke-width="1" />

                    <!-- æ«»èŠ±èŠ±åœ˜ï¼ˆåˆå§‹ä¸å¯è¦‹ï¼‰ -->
                    <!-- å·¦å´èŠ±åœ˜ -->
                    <circle class="blossom" cx="60" cy="160" r="25" fill="#ffb7d5" opacity="0.9" />
                    <circle class="blossom" cx="50" cy="145" r="20" fill="#ffc0e0" opacity="0.85" />
                    <circle class="blossom" cx="80" cy="145" r="22" fill="#ffaad0" opacity="0.9" />
                    <circle class="blossom" cx="70" cy="125" r="23" fill="#ffb7d5" opacity="0.88" />
                    <circle class="blossom" cx="55" cy="135" r="18" fill="#ffc8e5" opacity="0.85" />
                    <circle class="blossom" cx="65" cy="155" r="20" fill="#ffaad0" opacity="0.87" />

                    <!-- å³å´èŠ±åœ˜ -->
                    <circle class="blossom" cx="240" cy="160" r="25" fill="#ffb7d5" opacity="0.9" />
                    <circle class="blossom" cx="250" cy="145" r="20" fill="#ffc0e0" opacity="0.85" />
                    <circle class="blossom" cx="220" cy="145" r="22" fill="#ffaad0" opacity="0.9" />
                    <circle class="blossom" cx="230" cy="125" r="23" fill="#ffb7d5" opacity="0.88" />
                    <circle class="blossom" cx="245" cy="135" r="18" fill="#ffc8e5" opacity="0.85" />
                    <circle class="blossom" cx="235" cy="155" r="20" fill="#ffaad0" opacity="0.87" />

                    <!-- ä¸Šæ–¹èŠ±åœ˜ -->
                    <circle class="blossom" cx="100" cy="85" r="24" fill="#ffb7d5" opacity="0.9" />
                    <circle class="blossom" cx="115" cy="65" r="22" fill="#ffc0e0" opacity="0.88" />
                    <circle class="blossom" cx="90" cy="75" r="20" fill="#ffaad0" opacity="0.87" />
                    <circle class="blossom" cx="200" cy="85" r="24" fill="#ffb7d5" opacity="0.9" />
                    <circle class="blossom" cx="185" cy="65" r="22" fill="#ffc0e0" opacity="0.88" />
                    <circle class="blossom" cx="210" cy="75" r="20" fill="#ffaad0" opacity="0.87" />

                    <!-- ä¸­å¤®èŠ±åœ˜ -->
                    <circle class="blossom" cx="150" cy="120" r="26" fill="#ffb7d5" opacity="0.92" />
                    <circle class="blossom" cx="135" cy="110" r="22" fill="#ffc0e0" opacity="0.88" />
                    <circle class="blossom" cx="165" cy="110" r="22" fill="#ffaad0" opacity="0.88" />
                    <circle class="blossom" cx="150" cy="100" r="24" fill="#ffc8e5" opacity="0.9" />
                    <circle class="blossom" cx="140" cy="130" r="20" fill="#ffb7d5" opacity="0.85" />
                    <circle class="blossom" cx="160" cy="130" r="20" fill="#ffaad0" opacity="0.85" />

                    <!-- é¡å¤–çš„å°èŠ±åœ˜é»ç¶´ -->
                    <circle class="blossom" cx="110" cy="150" r="18" fill="#ffc0e0" opacity="0.83" />
                    <circle class="blossom" cx="190" cy="150" r="18" fill="#ffb7d5" opacity="0.83" />
                    <circle class="blossom" cx="130" cy="90" r="16" fill="#ffaad0" opacity="0.8" />
                    <circle class="blossom" cx="170" cy="90" r="16" fill="#ffc8e5" opacity="0.8" />
                </svg>
            </div>

            <!-- å²èŠå§†å‹å¯µç‰© SVG -->
            <svg class="pomeranian" viewBox="0 0 200 160" aria-label="è·³èºçš„å°å¤¥ä¼´">
                <!-- åœ“èƒ–èº«é«” -->
                <ellipse cx="100" cy="110" rx="50" ry="45" fill="#3a3a3a" />
                <!-- åœ“èƒ–é ­ -->
                <circle cx="100" cy="65" r="32" fill="#3a3a3a" />
                <!-- è€³æœµ -->
                <circle cx="78" cy="48" r="12" fill="#3a3a3a" />
                <circle cx="122" cy="48" r="12" fill="#3a3a3a" />
                <!-- å°é¼»å­ -->
                <circle cx="100" cy="70" r="3" fill="#2a2a2a" />
                <!-- å¾®ç¬‘çš„å˜´ -->
                <path d="M 92 75 Q 100 80, 108 75" stroke="#2a2a2a" stroke-width="1.5" fill="none"
                    stroke-linecap="round" />
                <!-- è“¬é¬†å°¾å·´ -->
                <circle class="tail" cx="145" cy="100" r="20" fill="#3a3a3a" />
            </svg>
        </section>

        <!-- CH2: æ«»èŠ±æ¨¹å ´æ™¯ -->
        <section id="scene-sakura" class="scene">
            <div class="sky">
                <div class="stars"></div>
            </div>
            <div class="moon"></div>
            <div class="fog"></div>
            <div class="mountain">
                <svg viewBox="0 0 100 100" preserveAspectRatio="none">
                    <!-- å¾Œæ–¹çš„å±±ï¼ˆå·¦å´ï¼Œè¼ƒçŸ®è¼ƒåœ“ï¼‰ -->
                    <path class="peak-back"
                        d="M 0 100 L 0 50 Q 10 35, 20 38 Q 30 30, 40 42 Q 50 38, 60 55 L 60 100 Z" />
                    <!-- å‰æ–¹çš„ä¸»å±±ï¼ˆå³å´ï¼Œè¼ƒé«˜ï¼‰ -->
                    <path class="peak" d="M 30 100 L 30 65 Q 45 25, 60 22 Q 68 18, 75 22 Q 90 28, 100 70 L 100 100 Z" />
                </svg>
            </div>
            <div class="ground"></div>

            <!-- åŸå¸‚å¤œæ™¯ç‡ˆå…‰ -->
            <div class="city-lights"></div>

            <div class="tree">
                <svg viewBox="0 0 300 280" xmlns="http://www.w3.org/2000/svg">
                    <!-- ä¸»æ¨¹å¹¹ -->
                    <path class="trunk" d="M 150 280 Q 145 200 150 150 Q 155 200 150 280" stroke-width="8" />

                    <!-- å·¦å´ä¸»æ -->
                    <path class="branch" d="M 150 180 Q 100 170 60 160" />
                    <path class="branch" d="M 150 160 Q 110 150 80 145" />
                    <path class="branch" d="M 150 140 Q 100 130 70 125" />

                    <!-- å³å´ä¸»æ -->
                    <path class="branch" d="M 150 180 Q 200 170 240 160" />
                    <path class="branch" d="M 150 160 Q 190 150 220 145" />
                    <path class="branch" d="M 150 140 Q 200 130 230 125" />

                    <!-- ä¸Šæ–¹ææ¢ -->
                    <path class="branch" d="M 150 120 Q 120 100 100 85" />
                    <path class="branch" d="M 150 120 Q 180 100 200 85" />
                    <path class="branch" d="M 150 100 Q 130 80 115 65" />
                    <path class="branch" d="M 150 100 Q 170 80 185 65" />

                    <!-- ç´°å°ææ¢ï¼ˆå·¦ï¼‰ -->
                    <path class="branch" d="M 80 145 Q 70 140 65 135" stroke-width="1" />
                    <path class="branch" d="M 80 145 Q 75 150 70 155" stroke-width="1" />
                    <path class="branch" d="M 70 125 Q 60 120 55 115" stroke-width="1" />
                    <path class="branch" d="M 100 85 Q 90 75 85 70" stroke-width="1" />

                    <!-- ç´°å°ææ¢ï¼ˆå³ï¼‰ -->
                    <path class="branch" d="M 220 145 Q 230 140 235 135" stroke-width="1" />
                    <path class="branch" d="M 220 145 Q 225 150 230 155" stroke-width="1" />
                    <path class="branch" d="M 230 125 Q 240 120 245 115" stroke-width="1" />
                    <path class="branch" d="M 200 85 Q 210 75 215 70" stroke-width="1" />

                    <!-- æ«»èŠ±èŠ±åœ˜ï¼ˆåˆå§‹ä¸å¯è¦‹ï¼‰ -->
                    <!-- å·¦å´èŠ±åœ˜ -->
                    <circle class="blossom" cx="60" cy="160" r="25" fill="#ffb7d5" opacity="0.9" />
                    <circle class="blossom" cx="50" cy="145" r="20" fill="#ffc0e0" opacity="0.85" />
                    <circle class="blossom" cx="80" cy="145" r="22" fill="#ffaad0" opacity="0.9" />
                    <circle class="blossom" cx="70" cy="125" r="23" fill="#ffb7d5" opacity="0.88" />
                    <circle class="blossom" cx="55" cy="135" r="18" fill="#ffc8e5" opacity="0.85" />
                    <circle class="blossom" cx="65" cy="155" r="20" fill="#ffaad0" opacity="0.87" />

                    <!-- å³å´èŠ±åœ˜ -->
                    <circle class="blossom" cx="240" cy="160" r="25" fill="#ffb7d5" opacity="0.9" />
                    <circle class="blossom" cx="250" cy="145" r="20" fill="#ffc0e0" opacity="0.85" />
                    <circle class="blossom" cx="220" cy="145" r="22" fill="#ffaad0" opacity="0.9" />
                    <circle class="blossom" cx="230" cy="125" r="23" fill="#ffb7d5" opacity="0.88" />
                    <circle class="blossom" cx="245" cy="135" r="18" fill="#ffc8e5" opacity="0.85" />
                    <circle class="blossom" cx="235" cy="155" r="20" fill="#ffaad0" opacity="0.87" />

                    <!-- ä¸Šæ–¹èŠ±åœ˜ -->
                    <circle class="blossom" cx="100" cy="85" r="24" fill="#ffb7d5" opacity="0.9" />
                    <circle class="blossom" cx="115" cy="65" r="22" fill="#ffc0e0" opacity="0.88" />
                    <circle class="blossom" cx="90" cy="75" r="20" fill="#ffaad0" opacity="0.87" />
                    <circle class="blossom" cx="200" cy="85" r="24" fill="#ffb7d5" opacity="0.9" />
                    <circle class="blossom" cx="185" cy="65" r="22" fill="#ffc0e0" opacity="0.88" />
                    <circle class="blossom" cx="210" cy="75" r="20" fill="#ffaad0" opacity="0.87" />

                    <!-- ä¸­å¤®èŠ±åœ˜ -->
                    <circle class="blossom" cx="150" cy="120" r="26" fill="#ffb7d5" opacity="0.92" />
                    <circle class="blossom" cx="135" cy="110" r="22" fill="#ffc0e0" opacity="0.88" />
                    <circle class="blossom" cx="165" cy="110" r="22" fill="#ffaad0" opacity="0.88" />
                    <circle class="blossom" cx="150" cy="100" r="24" fill="#ffc8e5" opacity="0.9" />
                    <circle class="blossom" cx="140" cy="130" r="20" fill="#ffb7d5" opacity="0.85" />
                    <circle class="blossom" cx="160" cy="130" r="20" fill="#ffaad0" opacity="0.85" />

                    <!-- é¡å¤–çš„å°èŠ±åœ˜é»ç¶´ -->
                    <circle class="blossom" cx="110" cy="150" r="18" fill="#ffc0e0" opacity="0.83" />
                    <circle class="blossom" cx="190" cy="150" r="18" fill="#ffb7d5" opacity="0.83" />
                    <circle class="blossom" cx="130" cy="90" r="16" fill="#ffaad0" opacity="0.8" />
                    <circle class="blossom" cx="170" cy="90" r="16" fill="#ffc8e5" opacity="0.8" />
                </svg>
            </div>

            <!-- æ«»èŠ±èŠ±ç“£å®¹å™¨ -->
            <div class="petals"></div>

            <!-- å€’æ•¸æ•¸å­— -->
            <div class="countdown" id="countdownNumber">10</div>

            <!-- 2026 ç‰¹æ•ˆ -->
            <div class="year-glow" id="yearGlow"></div>
            <div class="year-2026" id="year2026">2026</div>
            <div class="happy-new-year" id="happyNewYear">æ–°å¹´å¿«æ¨‚ </div>
            <div class="year-particles" id="yearParticles"></div>

            <!-- ç…™ç«å®¹å™¨ -->
            <div class="fireworks" id="fireworksContainer"></div>

            <!-- å²èŠå§†ï¼ˆå·²åœä¸‹ï¼‰ -->
            <svg class="pomeranian stopped" style="left: calc(38vw - 80px);" viewBox="0 0 200 160">
                <!-- åœ“èƒ–èº«é«” -->
                <ellipse cx="100" cy="110" rx="50" ry="45" fill="#3a3a3a" />
                <!-- åœ“èƒ–é ­ -->
                <circle cx="100" cy="65" r="32" fill="#3a3a3a" />
                <!-- è€³æœµ -->
                <circle cx="78" cy="48" r="12" fill="#3a3a3a" />
                <circle cx="122" cy="48" r="12" fill="#3a3a3a" />
                <!-- å°é¼»å­ -->
                <circle cx="100" cy="70" r="3" fill="#2a2a2a" />
                <!-- å¾®ç¬‘çš„å˜´ -->
                <path d="M 92 75 Q 100 80, 108 75" stroke="#2a2a2a" stroke-width="1.5" fill="none"
                    stroke-linecap="round" />
                <!-- è“¬é¬†å°¾å·´ -->
                <circle class="tail" cx="145" cy="100" r="20" fill="#3a3a3a" />
            </svg>
        </section>

        <!-- CH3: æ˜Ÿæ˜Ÿé£›ä¾† -->
        <section id="scene-star" class="scene">
            <div class="sky">
                <div class="stars"></div>
            </div>

            <!-- æµæ˜Ÿ -->
            <div class="shooting-star"></div>

            <!-- å­µåŒ–æç¤º -->
            <div class="hatch-hint">
                <p>æœ‰ä»€éº¼ï¼Œæ­£åœ¨ç­‰ä½ </p>
                <button class="hatch-btn" id="hatchBtn">é–‹å§‹å­µåŒ–</button>
            </div>
        </section>

        <!-- CH4: å­µåŒ–å ´æ™¯ -->
        <section id="scene-hatching" class="scene">
            <div class="sky">
                <div class="stars"></div>
            </div>

            <div class="hatching-egg">
                <div class="crack crack-1"></div>
                <div class="crack crack-2"></div>
                <div class="crack crack-3"></div>
                <div class="inner-light"></div>
            </div>

            <p class="hatch-message">æœ‰ä»€éº¼ï¼Œæ­£åœ¨è£¡é¢é†’ä¾†</p>
        </section>

        <!-- CH5: å¯µç‰©é¦–é  -->
        <section id="scene-pet-home" class="scene">


            <!-- ğŸ‚ ç”Ÿæ—¥ç‰¹æ®ŠæŒ‰éˆ•ï¼ˆåªåœ¨ç”Ÿæ—¥ç•¶å¤©é¡¯ç¤ºï¼‰ -->
            <button class="birthday-special-button" id="birthdaySpecialBtn">
                ğŸ‚
            </button>
            <!-- å¤¢å¹»èƒŒæ™¯ - å°‡åœ–ç‰‡æ”¾åœ¨é€™è£¡ -->
            <div class="dreamy-bg">
                <!-- 
                    èƒŒæ™¯åœ–ç‰‡ä½¿ç”¨èªªæ˜ï¼š
                    1. å°‡ background.png æ”¾åœ¨èˆ‡ index.html åŒä¸€å€‹è³‡æ–™å¤¾
                    2. å¦‚æœè¦ç”¨å…¶ä»–åœ–ç‰‡ï¼Œä¿®æ”¹ä¸‹æ–¹çš„ url('background.png')
                    3. ä¾‹å¦‚ï¼šurl('images/my-image.png') æˆ–å®Œæ•´ç¶²å€
                    
                    æª¢æŸ¥åœ–ç‰‡æ˜¯å¦è¼‰å…¥ï¼š
                    - æŒ‰ F12 æ‰“é–‹é–‹ç™¼è€…å·¥å…·
                    - åˆ° Console æ¨™ç±¤æŸ¥çœ‹è¼‰å…¥è¨Šæ¯
                    - å¦‚æœçœ‹åˆ° "âœ… èƒŒæ™¯åœ–ç‰‡è¼‰å…¥æˆåŠŸï¼" è¡¨ç¤ºæˆåŠŸ
                    - å¦‚æœçœ‹åˆ° "âŒ èƒŒæ™¯åœ–ç‰‡è¼‰å…¥å¤±æ•—" è¡¨ç¤ºè·¯å¾‘éŒ¯èª¤
                -->
                <div class="dreamy-bg-image" id="bgImage" style="background-image: url('background.png');"></div>
                <!-- ç–ŠåŠ æ¼¸å±¤ -->
                <div class="dreamy-overlay"></div>
                <!-- é­”æ³•ç²’å­ -->
                <div class="magic-particles"></div>
            </div>

            <!-- æ˜Ÿç©º -->
            <div class="sky">
                <div class="stars"></div>
            </div>

            <!-- æ£®æ—å‰ªå½± -->
            <div class="forest-silhouette"></div>

            <!-- å›å®¶å°è·¯ -->
            <div class="path-home"></div>

            <!-- æº«æš–ç‡ˆå…‰ -->
            <div class="warm-lights"></div>

            <!-- æ…¶ç¥ç…™ç« -->
            <div class="celebration-fireworks" id="celebrationFireworks"></div>

            <div class="pet-container">
                <svg class="pet" id="petSvg" viewBox="0 0 200 160" aria-label="ä½ çš„è·¨å¹´å°å¯µç‰©">
                    <ellipse cx="100" cy="110" rx="50" ry="45" />
                    <circle cx="100" cy="65" r="32" />
                    <circle cx="78" cy="48" r="12" />
                    <circle cx="122" cy="48" r="12" />
                    <circle class="eye left" cx="88" cy="65" r="4" fill="#000" />
                    <circle class="eye right" cx="112" cy="65" r="4" fill="#000" />
                    <circle class="tail" cx="145" cy="100" r="20" />
                </svg>

                <h1 class="pet-name">ä½ çš„è·¨å¹´å°å¤¥ä¼´</h1>
                <p class="pet-message" id="petMessage">
                    è¬è¬ä½ èµ°åˆ°é€™è£¡<br>
                    æ¥ä¸‹ä¾†çš„æ—¥å­ï¼Œå°±è®“æˆ‘é™ªä½ å§
                </p>
            </div>

            <!-- æ„›å¿ƒç‰¹æ•ˆå®¹å™¨ -->
            <div class="hearts-container" id="heartsContainer"></div>

            <!-- é¤µé£Ÿæç¤ºè¨Šæ¯ -->
            <div class="feed-message" id="feedMessage">å¥½å¥½åƒ~ â¤</div>

            <!-- è¨˜æ†¶è¡¨å–® -->
            <div class="memory-form" id="memoryForm">
                <input id="ownerName" type="text" placeholder="ä½ çš„åå­—" maxlength="10">
                <input id="ownerBirthday" type="date">
                <button id="saveMemoryBtn">è®“æˆ‘è¨˜ä½ä½ </button>
            </div>

            <!-- é£½é£Ÿåº¦é¡¯ç¤ºï¼ˆç¨ç«‹æ–¼é¤µé£Ÿç³»çµ±ä¹‹å¤–ï¼‰ -->
            <div class="hunger-display" id="hungerDisplay">
                <span class="hunger-label">é£½é£Ÿ</span>
                <div class="hunger-icons" id="hungerIcons">
                    <span class="hunger-heart full">â¤</span>
                    <span class="hunger-heart full">â¤</span>
                    <span class="hunger-heart full">â¤</span>
                    <span class="hunger-heart full">â¤</span>
                    <span class="hunger-heart full">â¤</span>
                </div>
            </div>

            <!-- é¤µé£Ÿç³»çµ± -->
            <div class="feeding-system" id="feedingSystem">
                <button class="feed-button" id="feedButton">
                    <span>ğŸª</span>
                    <span>é¤µé£Ÿ</span>
                </button>
            </div>

            <div class="top-left-msg-btn">
                <button class="action-btn" onclick="togglePetModal(true)">æŸ¥çœ‹è¨Šæ¯</button>
            </div>

            <div id="petModal" class="pet-modal-overlay">
                <div class="pet-modal-content">
                    <h3>ğŸ’Œ ç§˜å¯†è¨Šæ¯</h3>
                    <p id="petModalText">å¥½å•¦èªªäº†é€™éº¼å¤š! ä»Šå¤©ä¹Ÿæ˜¯ç‰¹åˆ¥çš„æ—¥å­å•¦ï¼ï¼ å’³å’³ è€å¯¦èªªä»Šå¤©æ˜¯ç¬¬ä¸€æ¬¡å¹«äººå®¶åœ¨è·¨å¹´çš„æ™‚å€™æ…¶ç”Ÿæ¬¸~~~~å¥½é…·å•Šå•Šå•ŠğŸ˜– ä½†é‚„æ˜¯è¦èªª å°å£½æ˜Ÿï¼ç”Ÿæ—¥å¿«æ¨‚
                        ãŸã‚“ã—ã‚‡ã³ãŠã‚ã§ã¨ğŸ‰ğŸ‚ğŸˆ æ­å–œä½ è¿ä¾†äººç”Ÿ21æ­²çš„ç”Ÿæ—¥å•¦~~ å¸Œæœ›ä½ åœ¨21æ­²çš„æ™‚å€™ å¿ƒè£¡æƒ³çš„éƒ½æœƒå¯¦ç¾å•¦ ç ”ç©¶æ‰€é‚„æœ‰ä¸€æ®µæ™‚é–“~ é›–ç„¶ä½ è½äº†æˆ‘èªªå¥½ä¹…çš„å¿ƒéˆé›æ¹¯å—ï¼ˆï¼Ÿ
                        ä¸éå‘€è€ƒç ”éç¨‹å¾ˆè‰±è¾› è¦å¥½å¥½åŠ æ²¹å•¦ï¼ï¼ æˆ‘å€‘éƒ½æœƒé™ªåœ¨ä½ èº«é‚Šçš„ï¼ å¤§å®¶ä¸€èµ·åŠªåŠ›å•¦~ å¾€äººç”Ÿçš„ç›®æ¨™é‚é€²å˜›~~ åŠ æ²¹åŠ æ²¹ï¼ å¸Œæœ›ä½ å¯ä»¥è€ƒä¸Šç†æƒ³çš„ç ”ç©¶æ‰€å•¦ï¼ æœ‰ä»€éº¼å•é¡Œéƒ½å¯ä»¥ä¾†å•æˆ‘å•¦
                        æˆ–è€…æœ‰ä»€éº¼ç…©æƒ±ä¹‹é¡çš„ éƒ½å¯ä»¥èªªèªª ä¸éå‘€ç•¶ç„¶å¸Œæœ›æ¯å¤©ä¸€å®šè¦é–‹å¿ƒå•¦ ç…©æƒ±å…¨éƒ½å¿˜å…‰å…‰æ˜¯æœ€å¥½çš„Â°^Â° å¥½å§æˆ‘æƒ³äº†å¾ˆä¹… æœ€å¾Œé‚„æ˜¯é¸äº†ä¸€å€‹æœ€ç¬¦åˆä½ é¢¨æ ¼çš„æ±è¥¿ è«‹å¥½å¥½æ”¶ä¸‹å§è”¡å“¥ï¼
                        ä½†ç¸½è¦ºå¾—ä½ æ‹¿åˆ°å¾Œå°±æœƒç˜‹ç‹‚å‚³å“ˆå“ˆå“ˆ ä¸éæœ€è¿‘æ„Ÿè¦ºä½ å·²ç¶“å–œæ­¡ç”¨telegram äº†å—å“ˆå“ˆå“ˆï¼Ÿï¼ç•¢ç«Ÿé‚£è£¡æœ‰å…è²»çš„ å¥½å•¦å¥½å•¦æˆ‘çœŸçš„è¦ºå¾—æˆ‘å¤ªæœƒæ‰“ä¸€äº›å»¢è©±å•¦ï¼ ä»Šå¤©æ˜¯ä½ ç‰¹åˆ¥çš„æ—¥å­
                        å£½æ˜Ÿå¯ä»¥è¨±å€‹é¡˜å•¦ï¼ 1. 2. 3.ï¼ˆè¨˜å¾—ç•™åœ¨å¿ƒè£¡ä¸è¦èªªå‡ºä¾†ï¼‰ å¸Œæœ›ä»Šå¤©çš„ä½ èƒ½å¤ é¡˜æœ›éƒ½å¯¦ç¾å•¦~ ğŸª„ğŸŒŸ æœ€å¥½çš„ç¥ç¦çµ¦ä½ ï¼ æœ€å¾Œè¦å†èªªä¸€æ¬¡ï¼ ä¹‹å¾Œè«‹å¤šå¤šé—œç…§å•¦ï¼</p>
                    <button class="close-modal-btn" onclick="togglePetModal(false)">é—œé–‰ âœ¨</button>
                </div>
            </div>
        </section>



        <section id="scene-birthday" class="scene">
            <div class="sky">
                <div class="stars"></div>
            </div>
            <div class="moon"></div>

            <div class="birthday-cake-scene">
                <div class="birthday-message">
                    <h2 id="birthdayName">ç”Ÿæ—¥å¿«æ¨‚ï¼</h2>
                    <p>é¡˜ä½ çš„æ¯å€‹é¡˜æœ›éƒ½èƒ½å¯¦ç¾ âœ¨</p>
                </div>

                <div class="cake-container">
                    <div class="cake-layer layer-bottom">
                        <div class="frosting"></div>
                    </div>
                    <div class="cake-layer layer-middle">
                        <div class="frosting"></div>
                    </div>
                    <div class="cake-layer layer-top">
                        <div class="frosting"></div>
                    </div>

                    <div class="candle">
                        <div class="flame" id="cakeFlame"></div>
                        <div class="smoke" id="cakeSmoke"></div>
                    </div>
                </div>

                <button class="blow-candle-btn" id="blowCandleBtn">ğŸˆ å¹è Ÿç‡­è¨±é¡˜ ğŸˆ</button>
                <button class="close-birthday-btn" id="closeBirthdayBtn" style="display: none;">é—œé–‰ âœ¨</button>
            </div>

            <div class="confetti-container" id="confettiContainer"></div>
        </section>
    </main>


    <script>
        // ==========================================
        // è·³éå‹•ç•«åŠŸèƒ½
        // ==========================================
        let skipBtn = null;
        let isAnimationSkipped = false;

        function initSkipButton() {
            skipBtn = document.getElementById("skipAnimationBtn");

            // æª¢æŸ¥æ˜¯å¦å·²å¡«éåå­—å’Œç”Ÿæ—¥
            const name = localStorage.getItem(NAME_KEY);
            const birthday = localStorage.getItem(BDAY_KEY);

            if (name && birthday) {
                // âœ… å·²å¡«å®Œåå­—å’Œç”Ÿæ—¥ - é¡¯ç¤ºæŒ‰éˆ•
                skipBtn.textContent = "â­ è·³éå‹•ç•«";
                skipBtn.classList.add("show");
            } else {
                // âŒ æœªå¡«å®Œ - éš±è—æŒ‰éˆ•
                skipBtn.classList.remove("show");
            }

            // é»æ“Šè·³é
            skipBtn.addEventListener("click", skipToHome);
        }

        function skipToHome() {
            if (isAnimationSkipped) return;

            // âœ… æª¢æŸ¥æ˜¯å¦å·²ç¶“å¡«å¯«åå­—å’Œç”Ÿæ—¥
            const name = localStorage.getItem(NAME_KEY);
            const birthday = localStorage.getItem(BDAY_KEY);

            if (!name || !birthday) {
                // âŒ è³‡æ–™ä¸å®Œæ•´ - éš±è—æŒ‰éˆ•ï¼ˆç†è«–ä¸Šä¸æœƒåŸ·è¡Œåˆ°é€™è£¡ï¼‰
                skipBtn.classList.remove("show");
                return;
            }

            // âœ… è³‡æ–™å®Œæ•´ - å…è¨±è·³é
            isAnimationSkipped = true;

            // éš±è—æ‰€æœ‰å ´æ™¯
            document.querySelectorAll(".scene").forEach(s => s.classList.remove("active"));

            // ç›´æ¥é¡¯ç¤ºå¯µç‰©é¦–é 
            const homeScene = document.getElementById("scene-pet-home");
            homeScene.classList.add("active");

            // éš±è—è·³éæŒ‰éˆ•
            skipBtn.classList.remove("show");

            // åˆå§‹åŒ–å¯µç‰©é¦–é 
            checkBackgroundImage();
            startCelebrationFireworks();
            initializePetHome();
        }

        function hideSkipButton() {
            if (skipBtn) {
                skipBtn.classList.remove("show");
            }
        }
        // ==========================================
        // ä¸»æ§åˆ¶æµç¨‹
        // ==========================================

        // å•Ÿå‹•æ•´å€‹é«”é©—
        function startExperience() {
            // CH1: å²èŠå§†è·³èº (8ç§’)
            startRunningScene();

            setTimeout(() => {
                // CH2: æ«»èŠ±æ¨¹å ´æ™¯
                transitionToSakura();
            }, 8000);
        }

        // ==========================================
        // CH1: å¥”è·‘å ´æ™¯
        // ==========================================
        function startRunningScene() {
            const scene = document.getElementById("scene-running");
            const pom = scene.querySelector(".pomeranian");

            // å•Ÿå‹•è·³èºå‹•ç•«
            pom.classList.add("running");

            // 4ç§’å¾Œæ¨¹æœ¨é–‹å§‹è®Šæˆæ«»èŠ±æ¨¹
            setTimeout(() => {
                scene.classList.add("transform");
            }, 4000);

            // 8ç§’å¾Œå²èŠå§†åœä¸‹
            setTimeout(() => {
                pom.classList.remove("running");
                pom.classList.add("stopped");
            }, 8000);
        }

        // ==========================================
        // CH2: æ«»èŠ±æ¨¹å ´æ™¯
        // ==========================================
        function transitionToSakura() {
            // åˆ‡æ›å ´æ™¯
            document.getElementById("scene-running").classList.remove("active");
            const sakuraScene = document.getElementById("scene-sakura");
            sakuraScene.classList.add("active");
            sakuraScene.classList.add("transform"); // æ«»èŠ±æ¨¹ç‹€æ…‹

            // ç”Ÿæˆæ«»èŠ±
            spawnPetals(sakuraScene.querySelector(".petals"), 20);

            const pom = sakuraScene.querySelector(".pomeranian");

            // 2ç§’å¾Œå²èŠå§†æŠ¬é ­
            setTimeout(() => {
                pom.classList.add("look-up");
            }, 2000);

            // 3ç§’å¾Œé¡¯ç¤ºå¤œæ™¯ç‡ˆå…‰
            setTimeout(() => {
                sakuraScene.classList.add("show-city");
            }, 3000);

            // 6ç§’å¾Œé–‹å§‹å€’æ•¸
            setTimeout(() => {
                startCountdown(10);
            }, 6000);
        }

        // ç”Ÿæˆæ«»èŠ±èŠ±ç“£
        function spawnPetals(container, count) {
            container.innerHTML = "";
            const w = window.innerWidth;

            for (let i = 0; i < count; i++) {
                const petal = document.createElement("div");
                petal.className = "petal";

                const left = -50 + Math.random() * (w + 100); // å¾å·¦å¤–åˆ°å³å¤–
                const duration = 8 + Math.random() * 8; // 8-16ç§’
                const delay = Math.random() * 6; // 0-6ç§’å»¶é²
                const size = 10 + Math.random() * 8; // 10-18px

                petal.style.left = `${left}px`;
                petal.style.width = `${size}px`;
                petal.style.height = `${size}px`;
                petal.style.animationDuration = `${duration}s`;
                petal.style.animationDelay = `${delay}s`;

                container.appendChild(petal);
            }
        }

        // å€’æ•¸è¨ˆæ™‚
        function startCountdown(from) {
            const el = document.getElementById("countdownNumber");
            el.classList.add("visible");
            let n = from;
            el.textContent = String(n);

            const timer = setInterval(() => {
                n -= 1;
                el.textContent = String(n);

                if (n <= 0) {
                    clearInterval(timer);
                    el.classList.remove("visible");

                    // å€’æ•¸çµæŸï¼šé¡¯ç¤º 2026 ç‰¹æ•ˆ
                    show2026Effect();

                    // ğŸ† ç«‹å³é–‹å§‹æ”¾ç…™ç«ï¼ˆæŒçºŒ 27 ç§’ï¼‰
                    triggerFireworks();

                    // ğŸŠ æ™‚é–“è»¸ï¼š
                    // 0-6ç§’ï¼š2026 + ç…™ç«
                    // 6-7ç§’ï¼šéå ´
                    // 7-14ç§’ï¼šæ–°å¹´å¿«æ¨‚ + ç…™ç«
                    // 14-27ç§’ï¼šåªæœ‰ç…™ç«
                    // 27-28ç§’ï¼šæ·¡å‡º
                    // ç¸½å…± 28 ç§’
                    setTimeout(() => {
                        transitionToStar();
                    }, 28000); // ç¸½å…± 28 ç§’å¾Œåˆ‡æ›
                }
            }, 1000);
        }

        // é¡¯ç¤º 2026 ç‰¹æ•ˆ
        // é¡¯ç¤º 2026 èˆ‡ æ–°å¹´å¿«æ¨‚ç‰¹æ•ˆ (ä¿®æ”¹å¾Œçš„ç‰ˆæœ¬)
        function show2026Effect() {
            const year = document.getElementById("year2026");
            const happy = document.getElementById("happyNewYear");
            const glow = document.getElementById("yearGlow");

            // --- éšæ®µ 1: é¡¯ç¤º 2026 ---
            year.style.opacity = "1";
            year.classList.add("show");
            glow.classList.add("active");

            // 1.5ç§’å¾Œé–‹å§‹æ…¶ç¥å‹•ç•«
            setTimeout(() => {
                year.classList.add("celebrate");
                create2026Particles();
            }, 1500);

            // --- éšæ®µ 2: 9ç§’å¾Œéš±è— 2026ï¼Œæº–å‚™é¡¯ç¤ºæ–°å¹´å¿«æ¨‚ ---
            setTimeout(() => {
                year.style.transition = "opacity 1s ease";
                year.style.opacity = "0";
                glow.style.transition = "opacity 1s ease";
                glow.style.opacity = "0";

                // 1ç§’å¾Œï¼ˆ2026 å®Œå…¨æ¶ˆå¤±å¾Œï¼‰é¡¯ç¤ºæ–°å¹´å¿«æ¨‚
                setTimeout(() => {
                    happy.style.opacity = "1";
                    happy.classList.add("show");

                    // 1ç§’å¾Œé–‹å§‹å½ˆè·³å‹•ç•«
                    setTimeout(() => {
                        happy.classList.add("celebrate");
                    }, 1000);

                    // --- éšæ®µ 3: æ–°å¹´å¿«æ¨‚é¡¯ç¤º 9 ç§’å¾Œæ¶ˆå¤± ---
                    setTimeout(() => {
                        happy.style.transition = "opacity 1s ease";
                        happy.style.opacity = "0";
                    }, 9000); // é¡¯ç¤º 9 ç§’

                }, 1000); // éŠœæ¥é–“éš”

            }, 9000); // 2026 é¡¯ç¤º 9 ç§’
        }

        // éš±è— 2026 ç‰¹æ•ˆ
        function hide2026Effect() {
            const year = document.getElementById("year2026");
            const happy = document.getElementById("happyNewYear");
            const glow = document.getElementById("yearGlow");

            year.style.transition = "opacity 1s ease";
            year.style.opacity = "0";
            happy.style.transition = "opacity 1s ease";
            happy.style.opacity = "0";
            glow.style.transition = "opacity 1s ease";
            glow.style.opacity = "0";
        }

        // éš±è—æ–°å¹´å¿«æ¨‚
        function hideHappyNewYear() {
            const happy = document.getElementById("happyNewYear");
            happy.style.transition = "opacity 1s ease";
            happy.style.opacity = "0";
        }

        // å‰µå»º 2026 å‘¨åœçš„ç²’å­ç‰¹æ•ˆ
        function create2026Particles() {
            const container = document.getElementById("yearParticles");
            const colors = ["#ff6b6b", "#ffd93d", "#6bcf7f", "#4ecdc4", "#a78bfa", "#ff6bcf"];

            // æ¯0.3ç§’ç™¼å°„ä¸€æ¬¡ç²’å­ï¼ŒæŒçºŒ12ç§’
            let count = 0;
            const particleInterval = setInterval(() => {
                if (count >= 40) {
                    clearInterval(particleInterval);
                    return;
                }

                // å¾ 2026 å‘¨åœéš¨æ©Ÿä½ç½®ç™¼å°„
                const centerX = 50;
                const centerY = 40;
                const angle = Math.random() * Math.PI * 2;
                const radius = 15 + Math.random() * 10; // 15-25%

                const startX = centerX + Math.cos(angle) * radius;
                const startY = centerY + Math.sin(angle) * radius;

                // ç²’å­é£›å‘çš„ç›®æ¨™ä½ç½®
                const targetAngle = angle + (Math.random() - 0.5) * 1;
                const distance = 30 + Math.random() * 40;
                const targetX = startX + Math.cos(targetAngle) * distance;
                const targetY = startY + Math.sin(targetAngle) * distance;

                const color = colors[Math.floor(Math.random() * colors.length)];

                createYearParticle(container, startX, startY, targetX, targetY, color);
                count++;
            }, 300);
        }

        function createYearParticle(container, startX, startY, targetX, targetY, color) {
            const particle = document.createElement("div");
            particle.className = "year-particle";
            particle.style.left = `${startX}%`;
            particle.style.top = `${startY}%`;
            particle.style.background = color;
            particle.style.boxShadow = `0 0 12px ${color}`;

            const dx = targetX - startX;
            const dy = targetY - startY;

            container.appendChild(particle);

            // é–‹å§‹å‹•ç•«
            setTimeout(() => {
                particle.classList.add("burst");
                particle.style.transform = `translate(${dx}vh, ${dy}vh) scale(0)`;
            }, 10);

            // æ¸…ç†
            setTimeout(() => particle.remove(), 2100);
        }

        // ç…™ç«æ•ˆæœ - çœŸå¯¦çš„çˆ†ç‚¸ç²’å­ï¼ˆå¢åŠ ç…™ç«æ•¸é‡å’ŒæŒçºŒæ™‚é–“ï¼‰
        function triggerFireworks() {
            const container = document.getElementById("fireworksContainer");
            const colors = ["#ff6b6b", "#4ecdc4", "#ffe66d", "#a8e6cf", "#ffa8e4", "#ff9999", "#66d9ff"];

            // 50æ¬¡ç…™ç«ï¼ŒæŒçºŒç´„23ç§’
            for (let i = 0; i < 60; i++) {
                setTimeout(() => {
                    createFirework(container, colors);
                }, i * 450);
            }
        }

        function createFirework(container, colors) {
            const x = 15 + Math.random() * 70; // 15-85%
            const y = 10 + Math.random() * 40; // 10-50%
            const color = colors[Math.floor(Math.random() * colors.length)];
            const particleCount = 30 + Math.floor(Math.random() * 20); // 30-50å€‹ç²’å­

            // å‰µå»ºçˆ†ç‚¸ä¸­å¿ƒé»
            const center = document.createElement("div");
            center.className = "firework";
            center.style.left = `${x}%`;
            center.style.top = `${y}%`;
            container.appendChild(center);

            // å‰µå»ºæ”¾å°„ç‹€ç²’å­
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement("div");
                particle.className = "firework-particle";
                particle.style.background = color;
                particle.style.boxShadow = `0 0 10px ${color}`;

                // è¨ˆç®—ç²’å­çš„é£›è¡Œæ–¹å‘
                const angle = (i / particleCount) * Math.PI * 2;
                const velocity = 80 + Math.random() * 80; // 80-160px
                const tx = Math.cos(angle) * velocity;
                const ty = Math.sin(angle) * velocity;

                particle.style.setProperty('--tx', `${tx}px`);
                particle.style.setProperty('--ty', `${ty}px`);

                // è¨­ç½®å‹•ç•«
                particle.style.animation = `particle-explode 1.2s ease-out forwards`;
                particle.style.transform = `translate(0, 0)`;

                // ä½¿ç”¨CSSè®Šæ•¸ä¾†è¨­ç½®æœ€çµ‚ä½ç½®
                setTimeout(() => {
                    particle.style.transform = `translate(${tx}px, ${ty}px) scale(0)`;
                }, 10);

                center.appendChild(particle);
            }

            setTimeout(() => center.remove(), 1500);
        }

        // ==========================================
        // CH3: æ˜Ÿæ˜Ÿé£›ä¾†å ´æ™¯
        // ==========================================
        function transitionToStar() {
            // åˆ‡æ›å ´æ™¯
            document.getElementById("scene-sakura").classList.remove("active");
            const starScene = document.getElementById("scene-star");
            starScene.classList.add("active");

            const star = starScene.querySelector(".shooting-star");

            // æ˜Ÿæ˜Ÿé£›ä¾†
            setTimeout(() => {
                star.classList.add("flying");
            }, 500);

            // æ˜Ÿæ˜Ÿåœä½å¾Œè®Šæˆè›‹
            setTimeout(() => {
                star.classList.add("transform-to-egg");
            }, 2500);

            // é¡¯ç¤ºå­µåŒ–æç¤º
            setTimeout(() => {
                const hint = starScene.querySelector(".hatch-hint");
                hint.classList.add("visible");
            }, 4500);
        }

        // ==========================================
        // CH4: å­µåŒ–å ´æ™¯
        // ==========================================
        document.getElementById("hatchBtn").addEventListener("click", startHatching);

        function startHatching() {
            // åˆ‡æ›å ´æ™¯
            document.getElementById("scene-star").classList.remove("active");
            const hatchScene = document.getElementById("scene-hatching");
            hatchScene.classList.add("active");

            // è£‚ç´‹å‡ºç¾ï¼ˆå»¶é²3ç§’ï¼‰
            setTimeout(() => {
                hatchScene.classList.add("cracking");
            }, 3000);

            // å…§éƒ¨ç™¼å…‰ï¼ˆå»¶é²5ç§’ï¼‰
            setTimeout(() => {
                hatchScene.classList.add("light");
            }, 5000);

            // èª•ç”Ÿï¼ˆå»¶é²8ç§’ï¼‰
            setTimeout(() => {
                showPetHome();
            }, 8000);
        }

        // ==========================================
        // CH5: å¯µç‰©é¦–é 
        // ==========================================
        function showPetHome() {
            // åˆ‡æ›å ´æ™¯
            document.getElementById("scene-hatching").classList.remove("active");
            const homeScene = document.getElementById("scene-pet-home");
            homeScene.classList.add("active");

            // æª¢æ¸¬èƒŒæ™¯åœ–ç‰‡æ˜¯å¦è¼‰å…¥
            checkBackgroundImage();

            // å•Ÿå‹•æ…¶ç¥ç…™ç«
            startCelebrationFireworks();

            // æª¢æŸ¥æ˜¯å¦å·²æœ‰è¨˜æ†¶
            initializePetHome();
        }

        // åˆå§‹åŒ–å¯µç‰©é¦–é 
        function initializePetHome() {
            const name = localStorage.getItem(NAME_KEY);

            if (!name) {
                // æœªè¨­å®šè¨˜æ†¶ - é–å®šæ‰€æœ‰äº’å‹•åŠŸèƒ½
                lockPetInteractions();
            } else {
                // å·²è¨­å®šè¨˜æ†¶ - è¼‰å…¥è³‡æ–™ä¸¦è§£é–åŠŸèƒ½
                loadMemoryIfExists();
            }
        }

        // é–å®šå¯µç‰©äº’å‹•åŠŸèƒ½
        function lockPetInteractions() {
            const petContainer = document.querySelector(".pet-container");
            const feedingSystem = document.getElementById("feedingSystem");
            const birthdayBtn = document.getElementById("birthdaySpecialBtn");

            petContainer.classList.add("locked");
            feedingSystem.classList.add("locked");
            birthdayBtn.classList.add("locked");
        }

        // è§£é–å¯µç‰©äº’å‹•åŠŸèƒ½
        function unlockPetInteractions() {
            const petContainer = document.querySelector(".pet-container");
            const feedingSystem = document.getElementById("feedingSystem");
            const birthdayBtn = document.getElementById("birthdaySpecialBtn");

            petContainer.classList.remove("locked");
            feedingSystem.classList.remove("locked");
            birthdayBtn.classList.remove("locked");
        }

        // æª¢æ¸¬èƒŒæ™¯åœ–ç‰‡è¼‰å…¥ç‹€æ…‹
        function checkBackgroundImage() {
            const bgElement = document.getElementById("bgImage");
            const bgStyle = window.getComputedStyle(bgElement);
            const bgImage = bgStyle.backgroundImage;

            // æª¢æŸ¥æ˜¯å¦æœ‰è¨­å®šèƒŒæ™¯åœ–ç‰‡
            if (bgImage && bgImage !== 'none') {
                // å˜—è©¦è¼‰å…¥åœ–ç‰‡
                const imageUrl = bgImage.match(/url\(["']?([^"']*)["']?\)/);
                if (imageUrl && imageUrl[1]) {
                    const img = new Image();
                    img.onload = function () {
                        console.log("âœ… èƒŒæ™¯åœ–ç‰‡è¼‰å…¥æˆåŠŸï¼");
                        console.log("ğŸ“¸ åœ–ç‰‡è·¯å¾‘ï¼š" + imageUrl[1]);
                        console.log("ğŸ“ åœ–ç‰‡å°ºå¯¸ï¼š" + img.width + "x" + img.height);
                    };
                    img.onerror = function () {
                        console.error("âŒ èƒŒæ™¯åœ–ç‰‡è¼‰å…¥å¤±æ•—ï¼");
                        console.error("ğŸ“‚ è«‹ç¢ºèª background.png æ˜¯å¦èˆ‡ index.html åœ¨åŒä¸€å€‹è³‡æ–™å¤¾");
                        console.error("ğŸ” ç•¶å‰å˜—è©¦è¼‰å…¥çš„è·¯å¾‘ï¼š" + imageUrl[1]);
                        console.log("ğŸ’¡ æç¤ºï¼šå¦‚æœåœ–ç‰‡åœ¨å…¶ä»–ä½ç½®ï¼Œè«‹ä¿®æ”¹ HTML ä¸­çš„ url('background.png')");
                    };
                    img.src = imageUrl[1];
                }
            } else {
                console.warn("âš ï¸ æœªè¨­å®šèƒŒæ™¯åœ–ç‰‡");
            }
        }

        // æ…¶ç¥ç…™ç«æ•ˆæœï¼ˆå»¶é•·æŒçºŒæ™‚é–“ï¼‰
        function startCelebrationFireworks() {
            const container = document.getElementById("celebrationFireworks");
            const colors = ["#ff99cc", "#ffaadd", "#ffd4e5", "#ffe0f0", "#ffc4dd", "#ffb3d9"];

            // æŒçºŒç”Ÿæˆå°ç…™ç«ï¼ˆå¢åŠ åˆ° 40 å€‹ï¼‰
            let count = 0;
            const interval = setInterval(() => {
                if (count >= 40) {
                    clearInterval(interval);
                    return;
                }

                // éš¨æ©Ÿä½ç½®
                const x = 15 + Math.random() * 70;
                const y = 15 + Math.random() * 40;
                const color = colors[Math.floor(Math.random() * colors.length)];

                createMiniBurst(container, x, y, color);
                count++;
            }, 400);
        }

        function createMiniBurst(container, x, y, color) {
            const particleCount = 8;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement("div");
                particle.className = "mini-firework";
                particle.style.left = `${x}%`;
                particle.style.top = `${y}%`;
                particle.style.background = color;
                particle.style.boxShadow = `0 0 8px ${color}`;

                const angle = (i / particleCount) * Math.PI * 2;
                const distance = 30 + Math.random() * 30;
                const tx = Math.cos(angle) * distance;
                const ty = Math.sin(angle) * distance;

                particle.style.setProperty('--tx', `${tx}px`);
                particle.style.setProperty('--ty', `${ty}px`);

                const delay = Math.random() * 0.3;
                particle.style.animationDelay = `${delay}s`;

                setTimeout(() => {
                    particle.style.transform = `translate(${tx}px, ${ty}px) scale(0)`;
                }, 10);

                container.appendChild(particle);

                setTimeout(() => particle.remove(), 2300);
            }
        }

        // ==========================================
        // è¨˜æ†¶ç³»çµ±
        // ==========================================
        const NAME_KEY = "pet_owner_name";
        const BDAY_KEY = "pet_owner_birthday";
        const HUNGER_KEY = "pet_hunger_level";
        const LAST_FEED_KEY = "pet_last_feed_time";

        document.getElementById("saveMemoryBtn").addEventListener("click", saveMemory);

        function saveMemory() {
            const name = document.getElementById("ownerName").value.trim();
            const birthday = document.getElementById("ownerBirthday").value;

            if (!name) {
                alert("æˆ‘æƒ³çŸ¥é“ä½ çš„åå­— â¤ï¸");
                return;
            }

            localStorage.setItem(NAME_KEY, name);
            if (birthday) localStorage.setItem(BDAY_KEY, birthday);

            document.querySelector(".pet-name").textContent = `${name} çš„å°å¤¥ä¼´`;
            document.getElementById("petMessage").innerHTML =
                `å¾ˆé«˜èˆˆèªè­˜ä½ ï¼Œ${name}<br>æˆ‘æœƒè¨˜å¾—ä»Šå¤©`;

            document.getElementById("memoryForm").style.display = "none";

            // ğŸ”“ è§£é–æ‰€æœ‰äº’å‹•åŠŸèƒ½
            unlockPetInteractions();

            // é¡¯ç¤ºé¤µé£Ÿç³»çµ±
            showFeedingSystem();

            // æª¢æŸ¥ç”Ÿæ—¥æŒ‰éˆ•
            checkAndShowBirthdayButton();

            // åˆå§‹åŒ–é£¢é¤“å€¼
            if (!localStorage.getItem(HUNGER_KEY)) {
                localStorage.setItem(HUNGER_KEY, "0");
                localStorage.setItem(LAST_FEED_KEY, Date.now());
            }
            updateHunger();
        }

        function loadMemoryIfExists() {
            const name = localStorage.getItem(NAME_KEY);
            if (!name) {
                // æ²’æœ‰è¨˜æ†¶ï¼Œä¿æŒé–å®šç‹€æ…‹
                return;
            }

            // æœ‰è¨˜æ†¶ï¼Œè¼‰å…¥è³‡æ–™
            document.querySelector(".pet-name").textContent = `${name} çš„å°å¤¥ä¼´`;
            document.getElementById("petMessage").innerHTML =
                `æˆ‘é‚„åœ¨ï¼Œ${name}<br>ä»Šå¤©ä¹Ÿä¸€èµ·æ…¢æ…¢èµ°å§`;

            document.getElementById("memoryForm").style.display = "none";

            // ğŸ”“ è§£é–æ‰€æœ‰äº’å‹•åŠŸèƒ½
            unlockPetInteractions();

            // é¡¯ç¤ºé¤µé£Ÿç³»çµ±
            showFeedingSystem();

            // æª¢æŸ¥ç”Ÿæ—¥
            checkBirthday();

            // æ›´æ–°é£¢é¤“å€¼
            updateHunger();

            // ğŸ‚ æª¢æŸ¥æ˜¯å¦é¡¯ç¤ºç”Ÿæ—¥æŒ‰éˆ•
            checkAndShowBirthdayButton();
        }

        function checkBirthday() {
            const birthday = localStorage.getItem(BDAY_KEY);
            if (!birthday) return;

            const today = new Date().toISOString().slice(5, 10);
            if (birthday.slice(5, 10) === today) {
                document.getElementById("petMessage").innerHTML =
                    "ä»Šå¤©æ˜¯ä½ çš„æ—¥å­<br>ç”Ÿæ—¥å¿«æ¨‚ ğŸ‚";
            }
        }

        // ==========================================
        // é¤µé£Ÿç³»çµ±
        // ==========================================
        function showFeedingSystem() {
            const feedingSystem = document.getElementById("feedingSystem");
            setTimeout(() => {
                feedingSystem.classList.add("visible");
            }, 500);
        }

        // åˆå§‹åŒ–é¤µé£Ÿç³»çµ±
        document.getElementById("feedButton").addEventListener("click", feedPet);

        function feedPet() {
            const hungerLevel = getHungerLevel();

            if (hungerLevel >= 5) {
                showFeedMessage("æˆ‘å·²ç¶“é£½é£½çš„äº†~ ğŸ’•");
                return;
            }

            // å¢åŠ é£½é£Ÿåº¦
            const newHunger = hungerLevel + 1;
            localStorage.setItem(HUNGER_KEY, newHunger);
            localStorage.setItem(LAST_FEED_KEY, Date.now());

            // æ›´æ–°é¡¯ç¤º
            updateHungerDisplay(newHunger);

            // è§¸ç™¼å‹•ç•«
            triggerFeedingAnimation();

            // é¡¯ç¤ºè¨Šæ¯
            const messages = [
                "å¥½å¥½åƒ~ â¤",
                "è¬è¬ä½ ~ ğŸ’•",
                "çœŸç¾å‘³ âœ¨",
                "å¥½å¹¸ç¦ ğŸŒŸ",
                "é‚„æƒ³å†åƒ ğŸ˜‹"
            ];
            const message = newHunger >= 5 ? "åƒé£½é£½äº†~ ğŸ’–" : messages[Math.floor(Math.random() * messages.length)];
            showFeedMessage(message);

            // æ›´æ–°å¯µç‰©è¨Šæ¯
            if (newHunger >= 5) {
                const name = localStorage.getItem(NAME_KEY);
                document.getElementById("petMessage").innerHTML =
                    name ? `è¬è¬ ${name}<br>æˆ‘åƒå¾—å¥½é–‹å¿ƒ ğŸ’•` : "æˆ‘åƒå¾—å¥½é–‹å¿ƒ ğŸ’•";
            }
        }

        function getHungerLevel() {
            const lastFeedTime = parseInt(localStorage.getItem(LAST_FEED_KEY) || "0");
            const hungerLevel = parseInt(localStorage.getItem(HUNGER_KEY) || "3");

            if (lastFeedTime === 0) return hungerLevel;

            // æ¯ 2 å°æ™‚é™ä½ 1 é»é£½é£Ÿåº¦
            const now = Date.now();
            const hoursPassed = (now - lastFeedTime) / (1000 * 60 * 60);
            const hungerDecrease = Math.floor(hoursPassed / 2);

            const newHunger = Math.max(0, hungerLevel - hungerDecrease);

            if (hungerDecrease > 0) {
                localStorage.setItem(HUNGER_KEY, newHunger);
                localStorage.setItem(LAST_FEED_KEY, now);
            }

            return newHunger;
        }

        function updateHunger() {
            const hungerLevel = getHungerLevel();
            updateHungerDisplay(hungerLevel);
        }

        function updateHungerDisplay(level) {
            const hearts = document.querySelectorAll(".hunger-heart");
            hearts.forEach((heart, index) => {
                if (index < level) {
                    heart.classList.add("full");
                    heart.classList.remove("empty");
                } else {
                    heart.classList.remove("full");
                    heart.classList.add("empty");
                }
            });
        }

        function triggerFeedingAnimation() {
            const pet = document.getElementById("petSvg");
            const button = document.getElementById("feedButton");

            // å¯µç‰©åƒæ±è¥¿å‹•ç•«
            pet.classList.add("eating");
            setTimeout(() => {
                pet.classList.remove("eating");
            }, 600);

            // æŒ‰éˆ•å‹•ç•«
            button.classList.add("feeding");
            setTimeout(() => {
                button.classList.remove("feeding");
            }, 500);

            // ç”¢ç”Ÿæ„›å¿ƒç‰¹æ•ˆ
            createHearts();
        }

        function createHearts() {
            const container = document.getElementById("heartsContainer");
            const petContainer = document.querySelector(".pet-container");
            const rect = petContainer.getBoundingClientRect();

            // ç”¢ç”Ÿ 5-8 å€‹æ„›å¿ƒ
            const heartCount = 5 + Math.floor(Math.random() * 4);

            for (let i = 0; i < heartCount; i++) {
                setTimeout(() => {
                    const heart = document.createElement("div");
                    heart.className = "floating-heart";
                    heart.textContent = "â¤";

                    // å¾å¯µç‰©å‘¨åœéš¨æ©Ÿä½ç½®ç”¢ç”Ÿ
                    const angle = Math.random() * Math.PI * 2;
                    const distance = 30 + Math.random() * 40;
                    const x = rect.left + rect.width / 2 + Math.cos(angle) * distance;
                    const y = rect.top + rect.height / 2 + Math.sin(angle) * distance;

                    heart.style.left = `${x}px`;
                    heart.style.top = `${y}px`;

                    container.appendChild(heart);

                    setTimeout(() => heart.remove(), 2000);
                }, i * 100);
            }
        }

        function showFeedMessage(message) {
            const messageEl = document.getElementById("feedMessage");
            messageEl.textContent = message;
            messageEl.classList.add("show");

            setTimeout(() => {
                messageEl.classList.remove("show");
            }, 2000);
        }

        // ==========================================
        // å¯µç‰©äº’å‹•
        // ==========================================
        const petLines = [
            "å¾ˆé«˜èˆˆèªè­˜ä½ æˆ‘çš„ä¸»äºº~",
            "ä»Šå¹´è«‹å¤šå¤šæŒ‡æ•™å•¦",
            "å»å¹´çš„ä½ è¾›è‹¦å•¦",
            "ä»Šå¹´æˆ‘å€‘ä¸€èµ·åšä¸€äº›ç²¾å½©çš„äº‹",
            "æˆ‘å¯ä»¥é™ªä½ å“­é™ªä½ ç¬‘",
            "é™ªä½ ä¸€èµ· åº¦é2026çš„å–œæ€’å“€æ¨‚ğŸ’•",
            "æœ‰ä½ çœŸå¥½ âœ¨",
            "å¸Œæœ›åœ¨æœªä¾†çš„æ¯ä¸€å¤© éƒ½èƒ½çœ‹åˆ°ä½ çš„ç¬‘å®¹ ğŸ˜Š",
            "æˆ‘æœƒæ˜¯ä½ çš„å¾Œç›¾çš„!",
            "è®“æˆ‘å€‘ä¸€èµ·è¿æ¥æ›´å¤šçš„å†’éšªå§ï¼",
            "è¬è¬ä½ é¸æ“‡äº†æˆ‘ä½œç‚ºä½ çš„å¤¥ä¼´ï¼",
            "ç„¡è«–ç™¼ç”Ÿä»€éº¼äº‹ï¼Œæˆ‘éƒ½æœƒåœ¨ä½ èº«é‚Šæ”¯æŒä½ ï¼",
            "è®“æˆ‘å€‘ä¸€èµ·å‰µé€ ç¾å¥½çš„å›æ†¶å§ï¼",
            "æœŸå¾…å’Œä½ ä¸€èµ·æ¢ç´¢é€™å€‹ä¸–ç•Œçš„æ¯ä¸€å€‹è§’è½ï¼",
            "æ¯ä¸€å¤©éƒ½æœ‰æ–°çš„é©šå–œï¼Œè®“æˆ‘å€‘ä¸€èµ·è¿æ¥å®ƒå€‘å§ï¼",
            "è¬è¬ä½ çµ¦äº†æˆ‘ä¸€å€‹æº«æš–çš„å®¶ï¼",
            "æˆ‘æœƒåŠªåŠ›æˆç‚ºä½ æœ€å¥½çš„æœ‹å‹ï¼",
            "è®“æˆ‘å€‘ä¸€èµ·è¿æ¥æ›´å¤šçš„å†’éšªå§ï¼",
            "æœŸå¾…å’Œä½ ä¸€èµ·æ¢ç´¢é€™å€‹ä¸–ç•Œçš„æ¯ä¸€å€‹è§’è½ï¼"
        ];

        document.querySelector(".pet").addEventListener("click", () => {
            const pet = document.querySelector(".pet");
            pet.classList.remove("touched");
            void pet.offsetWidth; // é‡ç½®å‹•ç•«
            pet.classList.add("touched");

            const name = localStorage.getItem(NAME_KEY);
            const line = petLines[Math.floor(Math.random() * petLines.length)];

            document.getElementById("petMessage").innerHTML =
                name ? `${line}<br>${name}` : line;

            // ç”¢ç”Ÿæ„›å¿ƒç‰¹æ•ˆ
            createHearts();
        });

        // ==========================================
        // ç”Ÿæ—¥ç‰¹æ®ŠæŒ‰éˆ•ç³»çµ±
        // ==========================================

        // æª¢æŸ¥ä¸¦é¡¯ç¤ºç”Ÿæ—¥æŒ‰éˆ•
        function checkAndShowBirthdayButton() {
            const birthday = localStorage.getItem(BDAY_KEY);
            if (!birthday) return;

            const today = new Date().toISOString().slice(5, 10);
            const userBirthday = birthday.slice(5, 10);

            if (today === userBirthday) {
                const btn = document.getElementById("birthdaySpecialBtn");
                btn.classList.add("show");
            }
        }

        // ç”Ÿæ—¥æŒ‰éˆ•é»æ“Šäº‹ä»¶
        document.getElementById("birthdaySpecialBtn").addEventListener("click", function () {
            openBirthdayCakeScene();
        });

        // é–‹å•Ÿç”Ÿæ—¥è›‹ç³•å ´æ™¯
        function openBirthdayCakeScene() {
            // è¨˜ä½ç•¶å‰å ´æ™¯
            const currentScene = document.querySelector(".scene.active");
            if (currentScene) {
                currentScene.dataset.previousScene = "true";
            }

            // åˆ‡æ›åˆ°ç”Ÿæ—¥å ´æ™¯
            const allScenes = document.querySelectorAll(".scene");
            allScenes.forEach(s => s.classList.remove("active"));

            const birthdayScene = document.getElementById("scene-birthday");
            birthdayScene.classList.add("active");

            // è¨­å®šç”Ÿæ—¥è¨Šæ¯
            const name = localStorage.getItem(NAME_KEY);
            if (name) {
                document.getElementById("birthdayName").textContent = `${name}ï¼Œç”Ÿæ—¥å¿«æ¨‚ï¼`;
            }

            // é‡ç½®è›‹ç³•ç‹€æ…‹
            resetCakeState();
        }

        // é‡ç½®è›‹ç³•ç‹€æ…‹
        function resetCakeState() {
            const flame = document.getElementById("cakeFlame");
            const smoke = document.getElementById("cakeSmoke");
            const blowBtn = document.getElementById("blowCandleBtn");
            const closeBtn = document.getElementById("closeBirthdayBtn");

            flame.classList.remove("blown-out");
            smoke.classList.remove("rising");
            blowBtn.style.display = "block";
            closeBtn.style.display = "none";

            // æ¸…é™¤ç´™å±‘
            document.getElementById("confettiContainer").innerHTML = "";
        }

        // å¹è Ÿç‡­
        document.getElementById("blowCandleBtn").addEventListener("click", function () {
            const flame = document.getElementById("cakeFlame");
            const smoke = document.getElementById("cakeSmoke");
            const btn = this;

            // å¹æ»…ç«ç„°
            flame.classList.add("blown-out");

            // é¡¯ç¤ºç…™éœ§
            setTimeout(() => {
                smoke.classList.add("rising");
            }, 400);

            // äº”å½©ç´™å±‘
            setTimeout(() => {
                createConfetti();
            }, 800);

            // éš±è—å¹è Ÿç‡­æŒ‰éˆ•ï¼Œé¡¯ç¤ºé—œé–‰æŒ‰éˆ•
            setTimeout(() => {
                btn.style.display = "none";
                document.getElementById("closeBirthdayBtn").style.display = "block";
            }, 1500);
        });

        // é—œé–‰ç”Ÿæ—¥å ´æ™¯
        document.getElementById("closeBirthdayBtn").addEventListener("click", function () {
            const birthdayScene = document.getElementById("scene-birthday");
            birthdayScene.classList.remove("active");

            // å›åˆ°ä¹‹å‰çš„å ´æ™¯
            const previousScene = document.querySelector(".scene[data-previous-scene='true']");
            if (previousScene) {
                previousScene.classList.add("active");
                delete previousScene.dataset.previousScene;
            } else {
                // å¦‚æœæ²’æœ‰è¨˜éŒ„ï¼Œå›åˆ°å¯µç‰©é¦–é 
                document.getElementById("scene-pet-home").classList.add("active");
            }
        });

        // å‰µå»ºäº”å½©ç´™å±‘
        function createConfetti() {
            const container = document.getElementById("confettiContainer");
            const colors = ["#ff6bcf", "#ffd93d", "#6bcf7f", "#4ecdc4", "#a78bfa", "#66d9ff"];
            const count = 50;

            for (let i = 0; i < count; i++) {
                const confetti = document.createElement("div");
                confetti.className = "confetti";

                const x = Math.random() * 100;
                const color = colors[Math.floor(Math.random() * colors.length)];
                const delay = Math.random() * 0.5;
                const duration = 2 + Math.random() * 1;

                confetti.style.left = `${x}%`;
                confetti.style.background = color;
                confetti.style.animationDelay = `${delay}s`;
                confetti.style.animationDuration = `${duration}s`;

                container.appendChild(confetti);

                setTimeout(() => {
                    confetti.classList.add("falling");
                }, 10);

                setTimeout(() => {
                    confetti.remove();
                }, (delay + duration) * 1000 + 100);
            }
        }

        // æ§åˆ¶å½ˆçª—é–‹é—œ
        function togglePetModal(show) {
            const modal = document.getElementById('petModal');
            if (show) {
                modal.classList.add('show');
            } else {
                modal.classList.remove('show');
            }
        }

        // ==========================================
        // å•Ÿå‹•ï¼
        // ==========================================
        window.addEventListener("load", () => {
            // åˆå§‹åŒ–è·³éæŒ‰éˆ•
            initSkipButton();

            setTimeout(startExperience, 500);
        });
        function showPetHome() {
            // éš±è—è·³éæŒ‰éˆ•ï¼ˆå‹•ç•«å·²å®Œæˆï¼‰
            hideSkipButton();

            // åˆ‡æ›å ´æ™¯
            document.getElementById("scene-hatching").classList.remove("active");
            const homeScene = document.getElementById("scene-pet-home");
            homeScene.classList.add("active");

            // ... å…¶ä»–ç¨‹å¼ç¢¼ä¿æŒä¸è®Š ...
        }
    </script>
</body>

</html>
